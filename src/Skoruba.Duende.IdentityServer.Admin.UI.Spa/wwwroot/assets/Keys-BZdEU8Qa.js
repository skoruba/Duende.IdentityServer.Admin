import{j as e}from"./ui-vendor-BHgw9ghC.js";import{P as y}from"./table-BczK1sh7.js";import{D as p}from"./DataTable-V4omrcUa.js";import{h as g,a6 as K,V as i,j as c,aL as h,ad as x,Z as D,_ as j,B as C,$ as f,a0 as k,L,t as w}from"./index-DAD0hXUP.js";import{u as M}from"./usePaginationTable-CmJzaEWp.js";import{u as b}from"./useMutation-B7qVQHXu.js";import{i as l,u as r}from"./i18n-vendor-CiQkzSQO.js";import{u as S}from"./modalHooks-ejr9IXPU.js";import{D as v}from"./DeleteDialog-Bik0suhb.js";import{E as A}from"./ellipsis-D2f4vTJH.js";import"./react-vendor-BOADiDeY.js";import"./Card-C9DSQP6u.js";import"./table-vendor-48jR4ZlK.js";import"./utils-zj3SKzMM.js";import"./alert-dialog-CIYdOZwQ.js";import"./trash-DKFf5J9F.js";const u=()=>new h(x.getApiBaseUrl()),T=(s=0,t=10)=>g([c.keys,s,t],async()=>{const n=await u().get(s,t);return{keys:n.keys??[],totalCount:n.totalCount}}),P=()=>{const s=K();return b(async t=>await u().delete(t),{onSuccess:()=>{i({title:String(l.t("Keys.DeleteSuccess"))}),s.invalidateQueries(c.keys)},onError:()=>{i({title:String(l.t("Keys.DeleteFailed")),variant:"destructive"})}})},E=({keyId:s})=>{const{t}=r(),a=S(),n=P();return e.jsxs(e.Fragment,{children:[e.jsxs(D,{children:[e.jsx(j,{asChild:!0,children:e.jsxs(C,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:t("Common.OpenMenu")}),e.jsx(A,{className:"h-4 w-4"})]})}),e.jsx(f,{align:"end",children:e.jsx(k,{variant:"destructive",onClick:a.openModal,children:t("Actions.Delete")})})]}),e.jsx(v,{isAlertOpen:a.isOpen,setIsAlertOpen:a.setValue,title:t("Keys.DeleteTitle"),message:t("Keys.DeleteDescription"),handleDelete:()=>n.mutate(s)})]})},I=()=>{const{t:s}=r(),{pagination:t,setPagination:a}=M(),{data:n,isLoading:d}=T(t.pageIndex,t.pageSize),m=[{accessorKey:"algorithm",header:s("Keys.Section.Label.Algorithm_Label")},{accessorKey:"use",header:s("Keys.Section.Label.Use_Label")},{accessorKey:"created",header:s("Keys.Section.Label.Created_Label"),cell:({row:o})=>new Date(o.original.created).toLocaleString()},{id:"actions",cell:({row:o})=>e.jsx(E,{keyId:o.original.id})}];return d?e.jsx(L,{fullscreen:!0}):e.jsx(p,{columns:m,data:(n==null?void 0:n.keys)??[],totalCount:(n==null?void 0:n.totalCount)??0,pagination:t,setPagination:a})},W=()=>{const{t:s}=r();return e.jsx(y,{title:s("Keys.PageTitle"),icon:w,accentKind:"providers",children:e.jsx(I,{})})};export{W as default};
