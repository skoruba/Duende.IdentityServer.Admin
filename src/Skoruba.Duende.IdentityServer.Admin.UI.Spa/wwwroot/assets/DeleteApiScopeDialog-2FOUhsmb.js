import{j as n}from"./ui-vendor-B17-n605.js";import{A as m,a as A,b as y,c as C,d as S,e as g,f as w,g as D}from"./alert-dialog-lMowj9XJ.js";import{ai as r,ad as p,aj as u,ak as h,a6 as v,V as f,j as d}from"./index-Wlv9NPcq.js";import{u as j}from"./useMutation-D1x_VNBj.js";import{H as x}from"./Hoorey-C8E0EA7s.js";import{u as P,T as N}from"./i18n-vendor-TY_g4tCM.js";const H=async(s,i,e)=>{var l;const t=await new r(p.getApiBaseUrl()).getScopes(s,i+1,e);return{items:((l=t.scopes)==null?void 0:l.map(o=>({id:o.id,name:o.name??"",displayName:o.displayName??"",description:o.description??"",enabled:o.enabled??!0,showInDiscoveryDocument:o.showInDiscoveryDocument??!0,required:o.required??!1,emphasize:o.emphasize??!1,userClaims:o.userClaims??[]})))??[],totalCount:t.totalCount}},M=async s=>{var a;const e=await new r(p.getApiBaseUrl()).getScope(s);return{name:e.name??"",displayName:e.displayName??"",description:e.description??"",enabled:e.enabled??!0,showInDiscoveryDocument:e.showInDiscoveryDocument??!0,required:e.required??!1,emphasize:e.emphasize??!1,userClaims:((a=e.userClaims)==null?void 0:a.map(t=>({id:t,label:t})))??[]}},Q=async s=>{var a;const i=new r(p.getApiBaseUrl()),e=new u({...s,id:0,apiScopeProperties:void 0,displayName:s.displayName,description:s.description,userClaims:((a=s.userClaims)==null?void 0:a.map(t=>t.id))??[]});await i.postScope(e)},T=async(s,i)=>{var t;const e=new r(p.getApiBaseUrl()),a=new u({...i,id:s,apiScopeProperties:void 0,displayName:i.displayName,description:i.description,userClaims:((t=i.userClaims)==null?void 0:t.map(c=>c.id))??[]});await e.putScope(a)},B=async s=>{await new r(p.getApiBaseUrl()).deleteScope(s)},K=async(s,i,e)=>{var l;const t=await new r(p.getApiBaseUrl()).getScopeProperties(s,i+1,e);return{items:((l=t.apiScopeProperties)==null?void 0:l.map(o=>({id:o.id,key:o.key,value:o.value})))??[],totalCount:t.totalCount}},O=async(s,i)=>{const e=new r(p.getApiBaseUrl()),a=new h({key:i.key,value:i.value,id:0});await e.postProperty(s,a)},E=async s=>{await new r(p.getApiBaseUrl()).deleteProperty(s)},F=({apiScopeId:s,apiScopeName:i,modal:e,onApiScopeDeleted:a})=>{const{t}=P(),c=v(),l=j(()=>B(s),{onSuccess:()=>{f({title:n.jsx(x,{}),description:t("ApiScope.Actions.Deleted")}),c.invalidateQueries(d.apiScopes),c.invalidateQueries(d.configurationIssues),c.invalidateQueries(d.configurationIssuesSummary),e.closeModal(),a==null||a()}});return n.jsx(m,{open:e.isOpen,onOpenChange:e.closeModal,children:n.jsxs(A,{children:[n.jsxs(y,{children:[n.jsx(C,{children:t("Actions.ConfirmDeletion")}),n.jsx(S,{children:n.jsx(N,{i18nKey:"ApiScope.Actions.DeleteApiScopeConfirm",values:{apiScopeName:i},components:{strong:n.jsx("strong",{className:"text-destructive"})}})})]}),n.jsxs(g,{children:[n.jsx(w,{onClick:e.closeModal,children:t("Actions.Cancel")}),n.jsx(D,{variant:"destructive",onClick:()=>l.mutate(),children:t("Actions.Delete")})]})]})})};export{F as D,O as a,K as b,M as c,E as d,Q as e,H as g,T as u};
