import{j as a}from"./ui-vendor-B17-n605.js";import{j as f,a as o,l as g}from"./react-vendor-DPOhIiRq.js";import{D as C,x as v,y as x,z as j,E as b,aI as k,B as d,G as D}from"./index-Wlv9NPcq.js";import{u as E}from"./i18n-vendor-TY_g4tCM.js";function I(t){const r=f();return o.useCallback(n=>{t.reset(t.getValues()),setTimeout(()=>{r(n)},0)},[t,r])}function L(){const t=f(),{reset:r}=D();return o.useCallback(n=>{r(),setTimeout(()=>{t(n)},0)},[t])}function N(t){const[r,n]=o.useState(!1),s=o.useRef(),{t:i}=E(),c=g(({currentLocation:e,nextLocation:u})=>t&&e.pathname!==u.pathname),l=o.useCallback(()=>(n(!0),new Promise(e=>{s.current=e})),[]),h=()=>{var e;n(!1),(e=s.current)==null||e.call(s,!0)},p=()=>{var e;n(!1),(e=s.current)==null||e.call(s,!1)};o.useEffect(()=>{c.state==="blocked"&&l().then(e=>{e&&c.proceed(),c.reset()})},[c,l]),o.useEffect(()=>{const e=u=>{t&&(u.preventDefault(),u.returnValue="")};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[t]);const m=a.jsx(C,{open:r,onOpenChange:n,children:a.jsxs(v,{onInteractOutside:e=>e.preventDefault(),children:[a.jsxs(x,{children:[a.jsx(j,{children:i("Actions.UnsavedChangesTitle")}),a.jsx(b,{children:i("Actions.UnsavedChangesConfirm")})]}),a.jsxs(k,{children:[a.jsx(d,{type:"button",variant:"outline",onClick:p,children:i("Actions.Cancel")}),a.jsx(d,{type:"button",variant:"destructive",onClick:h,children:i("Actions.Leave")})]})]})});return{confirm:l,DialogCmp:m}}export{N as a,I as b,L as u};
