import{j as o}from"./ui-vendor-B17-n605.js";import{j as f,a as i,l as g}from"./react-vendor-DPOhIiRq.js";import{D as C,x as v,y as x,z as j,E as D,aI as E,B as d,G as b}from"./index-ho5AqpLY.js";import{u as k}from"./i18n-vendor-TY_g4tCM.js";function I(t){const c=f();return i.useCallback(s=>{t.reset(t.getValues()),setTimeout(()=>{c(s)},0)},[t,c])}function L(){const t=f(),{reset:c}=b();return i.useCallback(s=>{c(),setTimeout(()=>{t(s)},0)},[t])}function N(t){const[c,s]=i.useState(!1),r=i.useRef(),{t:u}=k(),n=g(({currentLocation:e,nextLocation:a})=>t&&e.pathname!==a.pathname),l=i.useCallback(()=>(s(!0),new Promise(e=>{r.current=e})),[]),h=()=>{var e,a;s(!1),(e=n.reset)==null||e.call(n),(a=r.current)==null||a.call(r,!0)},p=()=>{var e,a;s(!1),(e=n.reset)==null||e.call(n),(a=r.current)==null||a.call(r,!1)};i.useEffect(()=>{n.state==="blocked"&&l().then(e=>{e&&n.proceed(),n.reset()})},[n,l]),i.useEffect(()=>{const e=a=>{t&&(a.preventDefault(),a.returnValue="")};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[t]);const m=o.jsx(C,{open:c,onOpenChange:s,children:o.jsxs(v,{onInteractOutside:e=>e.preventDefault(),children:[o.jsxs(x,{children:[o.jsx(j,{children:u("Actions.UnsavedChangesTitle")}),o.jsx(D,{children:u("Actions.UnsavedChangesConfirm")})]}),o.jsxs(E,{children:[o.jsx(d,{type:"button",variant:"outline",onClick:p,children:u("Actions.Cancel")}),o.jsx(d,{type:"button",variant:"destructive",onClick:h,children:u("Actions.Leave")})]})]})});return{confirm:l,DialogCmp:m}}export{N as a,I as b,L as u};
