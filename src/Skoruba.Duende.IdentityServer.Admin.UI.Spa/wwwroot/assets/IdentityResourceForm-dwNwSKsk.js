import{j as e}from"./ui-vendor-B17-n605.js";import{k as x,a as g}from"./react-vendor-DPOhIiRq.js";import{u as v}from"./form-vendor-DdiMXTjA.js";import{a as i,t as T,F as C}from"./FormRow-BJnnRaVs.js";import{L as N,S as f,j as o,B as R,a6 as _,V as D,I as P}from"./index-IoJ-2H-o.js";import{u as w}from"./useMutation-Cp5GjrFm.js";import{c as U,e as E,f as q,h as A,i as B,u as F}from"./IdentityResourceServices-BOE-lOqM.js";import{T as Q,a as z,b as y,c as b}from"./tabs-D4cmpmxB.js";import{C as I}from"./CardWrapper-DeOEr5M_.js";import{u as n}from"./i18n-vendor-TY_g4tCM.js";import{I as j}from"./info-IxScBoT7.js";import{p as k}from"./ClientServices-DHWtBFT7.js";import{U as h}from"./user-DwsTbNn5.js";import{P as H}from"./PropertiesApi-CyO8JwT4.js";import{T as K}from"./trash-2-CmK25YZh.js";import{H as V}from"./Hoorey-DuQ14gon.js";import{b as W,a as $}from"./useConfirmUnsavedChanges-DVH2KM2d.js";const G=()=>{const{t:s}=n();return e.jsxs(I,{title:s("IdentityResource.Tabs.Basics"),description:s("IdentityResource.Tabs.BasicsDescription"),icon:j,children:[e.jsx(i,{name:"name",label:s("IdentityResource.Section.Label.Name_Label"),description:s("IdentityResource.Section.Label.Name_Info"),type:"input",required:!0}),e.jsx(i,{name:"displayName",label:s("IdentityResource.Section.Label.DisplayName_Label"),description:s("IdentityResource.Section.Label.DisplayName_Info"),type:"input"}),e.jsx(i,{name:"description",label:s("IdentityResource.Section.Label.Description_Label"),description:s("IdentityResource.Section.Label.Description_Info"),type:"textarea"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(i,{name:"enabled",label:s("IdentityResource.Section.Label.Enabled_Label"),description:s("IdentityResource.Section.Label.Enabled_Info"),type:"switch"}),e.jsx(i,{name:"showInDiscoveryDocument",label:s("IdentityResource.Section.Label.ShowInDiscoveryDocument_Label"),description:s("IdentityResource.Section.Label.ShowInDiscoveryDocument_Info"),type:"switch"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(i,{name:"required",label:s("IdentityResource.Section.Label.Required_Label"),description:s("IdentityResource.Section.Label.Required_Info"),type:"switch"}),e.jsx(i,{name:"emphasize",label:s("IdentityResource.Section.Label.Emphasize_Label"),description:s("IdentityResource.Section.Label.Emphasize_Info"),type:"switch"})]})]})},J=()=>{var r;const{t:s}=n(),t=k();return t.isLoading?e.jsx(N,{}):e.jsx(I,{title:s("IdentityResource.Tabs.UserClaims"),description:s("IdentityResource.Tabs.UserClaimsDescription"),icon:h,children:e.jsx(i,{name:"userClaims",label:s("IdentityResource.Section.Label.UserClaims_Label"),description:s("IdentityResource.Section.Label.UserClaims_Info"),type:"dualList",includeSeparator:!0,dualListSettings:{initialItems:((r=t.data)==null?void 0:r.map(c=>({id:c,label:c})))??[]}})})},M=()=>{const{resourceId:s}=x(),{t}=n();return s?e.jsx(I,{title:t("IdentityResource.Tabs.Properties"),description:t("IdentityResource.Tabs.PropertiesDescription"),icon:f,children:e.jsx(H,{resourceId:Number(s),queryKey:[o.identityResourceProperties,s],pageTitle:t("IdentityResource.Tabs.Properties"),getProperties:q,addProperty:E,deleteProperty:U})}):null},O=({onIdentityResourceDelete:s})=>{const{t}=n(),{resourceId:r}=x();return e.jsxs(Q,{defaultValue:"basics",className:"w-full",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(z,{children:[e.jsxs(y,{value:"basics",className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-4 w-4"}),t("IdentityResource.Tabs.Basics")]}),e.jsxs(y,{value:"claims",className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-4 w-4"}),t("IdentityResource.Tabs.UserClaims")]}),r&&e.jsxs(y,{value:"properties",className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-4 w-4"}),t("IdentityResource.Tabs.Properties")]})]}),e.jsx("div",{className:"inline-flex",children:s&&e.jsxs(R,{variant:"destructive",onClick:s,type:"button",children:[e.jsx(K,{className:"mr-2 h-4 w-4"}),t("IdentityResource.Actions.Delete")]})})]}),e.jsx(b,{value:"basics",children:e.jsx(G,{})}),e.jsx(b,{value:"claims",children:e.jsx(J,{})}),r&&e.jsx(b,{value:"properties",children:e.jsx(M,{})})]})};var X=(s=>(s.Create="create",s.Edit="edit",s))(X||{});const be=({mode:s,resourceId:t,defaultValues:r,onIdentityResourceDelete:c,setNavigateWithBlocker:m})=>{const{t:a}=n(),l=_(),d=v({resolver:T(A(a)),defaultValues:r}),p=W(d);g.useEffect(()=>{m&&m(()=>p)},[p,m]);const{DialogCmp:L}=$(d.formState.isDirty),S=w(u=>s==="create"?B(u):F(Number(t),u),{onSuccess:()=>{l.invalidateQueries(o.identityResource),l.invalidateQueries(o.identityResources),l.invalidateQueries(o.configurationIssues),l.invalidateQueries(o.configurationIssuesSummary),D({title:e.jsx(V,{}),description:a(s==="create"?"IdentityResource.Actions.Created":"IdentityResource.Actions.Updated")}),p(P)}});return e.jsxs(e.Fragment,{children:[e.jsx(C,{...d,children:e.jsxs("form",{onSubmit:d.handleSubmit(u=>S.mutate(u)),children:[e.jsx(O,{onIdentityResourceDelete:c}),e.jsx("div",{className:"flex gap-4 justify-start mt-4",children:e.jsx(R,{type:"submit",children:a(s==="create"?"Actions.Create":"Actions.Save")})})]})}),L]})};export{be as I,X as a};
