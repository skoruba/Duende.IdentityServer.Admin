import{j as a}from"./ui-vendor-BHgw9ghC.js";import{j as f,a as r,l as g}from"./react-vendor-BOADiDeY.js";import{D as C,x as v,y as x,z as j,E as b,aI as k,B as d,G as D}from"./index-DAD0hXUP.js";import{u as E}from"./i18n-vendor-CiQkzSQO.js";function I(t){const s=f();return r.useCallback(n=>{t.reset(t.getValues()),setTimeout(()=>{s(n)},0)},[t,s])}function L(){const t=f(),{reset:s}=D();return r.useCallback(n=>{s(),setTimeout(()=>{t(n)},0)},[t,s])}function N(t){const[s,n]=r.useState(!1),o=r.useRef(),{t:i}=E(),c=g(({currentLocation:e,nextLocation:u})=>t&&e.pathname!==u.pathname),l=r.useCallback(()=>(n(!0),new Promise(e=>{o.current=e})),[]),h=()=>{var e;n(!1),(e=o.current)==null||e.call(o,!0)},p=()=>{var e;n(!1),(e=o.current)==null||e.call(o,!1)};r.useEffect(()=>{c.state==="blocked"&&l().then(e=>{e&&c.proceed(),c.reset()})},[c,l]),r.useEffect(()=>{const e=u=>{t&&(u.preventDefault(),u.returnValue="")};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[t]);const m=a.jsx(C,{open:s,onOpenChange:n,children:a.jsxs(v,{onInteractOutside:e=>e.preventDefault(),children:[a.jsxs(x,{children:[a.jsx(j,{children:i("Actions.UnsavedChangesTitle")}),a.jsx(b,{children:i("Actions.UnsavedChangesConfirm")})]}),a.jsxs(k,{children:[a.jsx(d,{type:"button",variant:"outline",onClick:p,children:i("Actions.Cancel")}),a.jsx(d,{type:"button",variant:"destructive",onClick:h,children:i("Actions.Leave")})]})]})});return{confirm:l,DialogCmp:m}}export{N as a,I as b,L as u};
