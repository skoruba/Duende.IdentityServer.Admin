import{j as e}from"./ui-vendor-BHgw9ghC.js";import{a as k}from"./react-vendor-BOADiDeY.js";import{a6 as Q,h as S,V as m,B as x,L as N}from"./index-DAD0hXUP.js";import{u as h}from"./useMutation-B7qVQHXu.js";import{u as H}from"./usePaginationTable-CmJzaEWp.js";import{D as L}from"./DataTable-V4omrcUa.js";import{u as w}from"./modalHooks-ejr9IXPU.js";import{P as z}from"./PropertyModal-C6p6cdot.js";import{A as B,a as E,b as F,c as O,d as V,e as K,f as R,g as G}from"./alert-dialog-CIYdOZwQ.js";import{u as I}from"./i18n-vendor-CiQkzSQO.js";import{T as J}from"./trash-DKFf5J9F.js";const se=({resourceId:l,queryKey:r,getProperties:A,addProperty:g,deleteProperty:j,pageTitle:y})=>{var p,u;const{t}=I(),{pagination:s,setPagination:f}=H(0,5),{isOpen:D,openModal:C,closeModal:c}=w(),[i,a]=k.useState(null),d=Q(),n=S([...r,s],()=>A(l,s.pageIndex,s.pageSize),{keepPreviousData:!0}),P=h(o=>g(l,o),{onSuccess:()=>{m({title:t("Actions.Hooray"),description:t("Property.Actions.Added")}),d.invalidateQueries(r),c()}}),b=h(o=>j(o),{onSuccess:()=>{m({title:t("Actions.Hooray"),description:t("Property.Actions.Deleted")}),d.invalidateQueries(r)}}),v=o=>{P.mutate(o)},T=[{accessorKey:"key",header:t("Property.Key")},{accessorKey:"value",header:t("Property.Value")},{id:"actions",cell:({row:o})=>e.jsx(x,{onClick:()=>a(o.original),type:"button",variant:"ghost",className:"text-red-500",size:"sm",children:e.jsx(J,{className:"h-4 w-4"})})}],M=()=>{i&&(b.mutate(i.id),a(null))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:y}),e.jsx(x,{type:"button",onClick:C,children:t("Property.Actions.Add")})]}),n.isLoading?e.jsx(N,{}):e.jsx(L,{columns:T,data:((p=n.data)==null?void 0:p.items)??[],totalCount:((u=n.data)==null?void 0:u.totalCount)??-1,pagination:s,setPagination:f}),e.jsx(z,{isOpen:D,onClose:c,onSubmit:v}),e.jsx(B,{open:!!i,onOpenChange:o=>!o&&a(null),children:e.jsxs(E,{children:[e.jsxs(F,{children:[e.jsx(O,{children:t("Actions.ConfirmDeletion")}),e.jsx(V,{children:t("Property.Actions.DeletePropertyConfirm")})]}),e.jsxs(K,{children:[e.jsx(R,{onClick:()=>a(null),children:t("Actions.Cancel")}),e.jsx(G,{variant:"destructive",onClick:M,children:t("Actions.Delete")})]})]})})]})};export{se as P};
