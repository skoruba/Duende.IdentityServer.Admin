import{a8 as k,a9 as f,a6 as T,V as w,j as g}from"./index-DAD0hXUP.js";import{z as o}from"./form-vendor-BmuYqd71.js";import{t as d,u as S,T as P}from"./i18n-vendor-CiQkzSQO.js";import{j as p}from"./ui-vendor-BHgw9ghC.js";import{u as y}from"./useMutation-B7qVQHXu.js";import{D as U}from"./DeleteDialog-Bik0suhb.js";import{n as q}from"./ClientServices-BnSiIVXe.js";import{C as R}from"./circle-check-big-Ciq8fzmZ.js";var v=(e=>(e.Confidential="Confidential",e.Public="Public",e.Machine="Machine",e.HighSecure="HighSecure",e))(v||{});const B="skoruba_client_type",m="Skoruba",_={Confidential:`${m}_Confidential`,Public:`${m}_Public`,Machine:`${m}_Machine`,HighSecure:`${m}_HighSecure`};var A=(e=>(e[e.Basics=1]="Basics",e[e.Uris=2]="Uris",e[e.Scopes=3]="Scopes",e[e.Secrets=4]="Secrets",e[e.Review=5]="Review",e))(A||{}),I=(e=>(e.AuthorizationCode="authorization_code",e.ClientCreadentials="client_credentials",e))(I||{}),h=(e=>(e[e.Custom=0]="Custom",e[e.Iat=1]="Iat",e[e.Nonce=2]="Nonce",e[e.IatAndNonce=3]="IatAndNonce",e))(h||{});const L=e=>o.string().url(e("Validation.UrlRequired")),C=o.object({id:o.string(),label:o.string()}),M=o.object({clientId:o.string().min(1,d("Validation.FieldRequired",{field:d("Client.Label.ClientId_Label")})),clientName:o.string().min(1,d("Validation.FieldRequired",{field:d("Client.Label.ClientName_Label")})),description:o.string().optional(),enabled:o.boolean().optional(),redirectUris:o.array(L(d)).optional(),postLogoutRedirectUris:o.array(L(d)).optional(),frontChannelLogoutUri:L(d).or(o.literal("")).optional(),frontChannelLogoutSessionRequired:o.boolean().optional(),backChannelLogoutUri:L(d).or(o.literal("")).optional(),backChannelLogoutSessionRequired:o.boolean().optional(),allowedCorsOrigins:o.array(o.string()).optional(),allowedScopes:o.array(C).optional(),allowOfflineAccess:o.boolean().optional(),requireClientSecret:o.boolean().optional(),allowedGrantTypes:o.array(C).optional(),enableLocalLogin:o.boolean().optional(),identityProviderRestrictions:o.array(o.string()).optional(),useSsoLifetime:o.number().optional(),coordinateLifetimeWithUserSession:o.boolean().optional(),identityTokenLifetime:o.number().optional(),allowedIdentityTokenSigningAlgorithms:o.array(o.string()).optional(),accessTokenLifetime:o.number().optional(),allowAccessTokenViaBrowser:o.boolean().optional(),accessTokenType:o.number().optional(),authorizationCodeLifetime:o.number().optional(),requireRequestObject:o.boolean().optional(),requirePkce:o.boolean().optional(),allowPlainTextPkce:o.boolean().optional(),absoluteRefreshTokenLifetime:o.number().optional(),slidingRefreshTokenLifetime:o.number().optional(),cibaLifetime:o.number().optional(),pollingInterval:o.number().optional(),refreshTokenUsage:o.number().optional(),refreshTokenExpiration:o.number().optional(),updateAccessTokenClaimsOnRefresh:o.boolean().optional(),includeJti:o.boolean().optional(),alwaysSendClientClaims:o.boolean().optional(),alwaysIncludeUserClaimsInIdToken:o.boolean().optional(),clientClaimsPrefix:o.string().optional(),pairWiseSubjectSalt:o.string().optional(),requireDPoP:o.boolean().optional(),dPoPClockSkew:o.string().optional(),dPoPValidationMode:o.string().optional(),requirePushedAuthorization:o.boolean().optional(),pushedAuthorizationLifetime:o.number().optional(),initiateLoginUri:o.string().optional(),requireConsent:o.boolean().optional(),allowRememberConsent:o.boolean().optional(),clientUri:o.string().optional(),logoUri:o.string().optional(),userCodeType:o.string().optional(),deviceCodeLifetime:o.number().optional(),consentLifetime:o.number().optional(),protocolType:o.string().optional(),userSsoLifetime:o.number().optional(),properties:o.array(o.object({id:o.number(),key:o.string(),value:o.string()})).optional(),claims:o.array(o.object({id:o.number(),key:o.string(),value:o.string()})).optional()}),i={clientId:"",clientName:"",description:void 0,enabled:!0,redirectUris:[],postLogoutRedirectUris:[],frontChannelLogoutUri:void 0,frontChannelLogoutSessionRequired:!0,backChannelLogoutUri:void 0,backChannelLogoutSessionRequired:!0,allowedCorsOrigins:[],allowedScopes:[],allowOfflineAccess:!1,requireClientSecret:!0,allowedGrantTypes:[],enableLocalLogin:!0,identityProviderRestrictions:[],useSsoLifetime:0,coordinateLifetimeWithUserSession:!1,identityTokenLifetime:300,allowedIdentityTokenSigningAlgorithms:[],accessTokenLifetime:3600,allowAccessTokenViaBrowser:!1,accessTokenType:0,authorizationCodeLifetime:300,requireRequestObject:!1,requirePkce:!1,allowPlainTextPkce:!1,absoluteRefreshTokenLifetime:2592e3,slidingRefreshTokenLifetime:1296e3,cibaLifetime:0,pollingInterval:0,refreshTokenUsage:1,refreshTokenExpiration:0,updateAccessTokenClaimsOnRefresh:!1,includeJti:!1,alwaysSendClientClaims:!1,alwaysIncludeUserClaimsInIdToken:!1,clientClaimsPrefix:"client_",pairWiseSubjectSalt:void 0,requireDPoP:!1,dPoPClockSkew:"00:05:00",dPoPValidationMode:h.Iat.toString(),requirePushedAuthorization:!1,pushedAuthorizationLifetime:0,initiateLoginUri:void 0,requireConsent:!0,allowRememberConsent:!0,clientUri:void 0,logoUri:void 0,userCodeType:void 0,deviceCodeLifetime:300,consentLifetime:void 0,protocolType:"oidc",userSsoLifetime:void 0,properties:[],claims:[]},G=(e,c)=>{var r,l,t,a,u;return{clientId:e.clientId??i.clientId,clientName:e.clientName??i.clientName,description:e.description??i.description,enabled:e.enabled??i.enabled,redirectUris:e.redirectUris??i.redirectUris,postLogoutRedirectUris:e.postLogoutRedirectUris??i.postLogoutRedirectUris,frontChannelLogoutUri:e.frontChannelLogoutUri??i.frontChannelLogoutUri,frontChannelLogoutSessionRequired:e.frontChannelLogoutSessionRequired??i.frontChannelLogoutSessionRequired,backChannelLogoutUri:e.backChannelLogoutUri??i.backChannelLogoutUri,backChannelLogoutSessionRequired:e.backChannelLogoutSessionRequired??i.backChannelLogoutSessionRequired,allowedCorsOrigins:e.allowedCorsOrigins??i.allowedCorsOrigins,allowedScopes:((r=e.allowedScopes)==null?void 0:r.map(n=>({id:n,label:n})))??i.allowedScopes,allowOfflineAccess:e.allowOfflineAccess??i.allowOfflineAccess,requireClientSecret:e.requireClientSecret??i.requireClientSecret,allowedGrantTypes:((l=e.allowedGrantTypes)==null?void 0:l.map(n=>{const s=c.find(b=>b.id===n);return s||{id:n,label:n}}))??i.allowedGrantTypes,enableLocalLogin:e.enableLocalLogin??i.enableLocalLogin,identityProviderRestrictions:e.identityProviderRestrictions??i.identityProviderRestrictions,useSsoLifetime:e.userSsoLifetime??i.useSsoLifetime,coordinateLifetimeWithUserSession:e.coordinateLifetimeWithUserSession??i.coordinateLifetimeWithUserSession,identityTokenLifetime:e.identityTokenLifetime??i.identityTokenLifetime,allowedIdentityTokenSigningAlgorithms:e.allowedIdentityTokenSigningAlgorithms??i.allowedIdentityTokenSigningAlgorithms,accessTokenLifetime:e.accessTokenLifetime??i.accessTokenLifetime,allowAccessTokenViaBrowser:e.allowAccessTokensViaBrowser??i.allowAccessTokenViaBrowser,accessTokenType:e.accessTokenType??i.accessTokenType,authorizationCodeLifetime:e.authorizationCodeLifetime??i.authorizationCodeLifetime,requireRequestObject:e.requireRequestObject??i.requireRequestObject,requirePkce:e.requirePkce??i.requirePkce,allowPlainTextPkce:e.allowPlainTextPkce??i.allowPlainTextPkce,absoluteRefreshTokenLifetime:e.absoluteRefreshTokenLifetime??i.absoluteRefreshTokenLifetime,slidingRefreshTokenLifetime:e.slidingRefreshTokenLifetime??i.slidingRefreshTokenLifetime,cibaLifetime:e.cibaLifetime??i.cibaLifetime,pollingInterval:e.pollingInterval??i.pollingInterval,refreshTokenUsage:e.refreshTokenUsage??i.refreshTokenUsage,refreshTokenExpiration:e.refreshTokenExpiration??i.refreshTokenExpiration,updateAccessTokenClaimsOnRefresh:e.updateAccessTokenClaimsOnRefresh??i.updateAccessTokenClaimsOnRefresh,includeJti:e.includeJwtId??i.includeJti,alwaysSendClientClaims:e.alwaysSendClientClaims??i.alwaysSendClientClaims,alwaysIncludeUserClaimsInIdToken:e.alwaysIncludeUserClaimsInIdToken??i.alwaysIncludeUserClaimsInIdToken,clientClaimsPrefix:e.clientClaimsPrefix??i.clientClaimsPrefix,pairWiseSubjectSalt:e.pairWiseSubjectSalt??i.pairWiseSubjectSalt,requireDPoP:e.requireDPoP??i.requireDPoP,dPoPClockSkew:((t=e.dPoPClockSkew)==null?void 0:t.toString())??i.dPoPClockSkew,dPoPValidationMode:e.dPoPValidationMode.toString()??i.dPoPValidationMode,requirePushedAuthorization:e.requirePushedAuthorization??i.requirePushedAuthorization,pushedAuthorizationLifetime:e.pushedAuthorizationLifetime??i.pushedAuthorizationLifetime,initiateLoginUri:e.initiateLoginUri??i.initiateLoginUri,requireConsent:e.requireConsent??i.requireConsent,allowRememberConsent:e.allowRememberConsent??i.allowRememberConsent,clientUri:e.clientUri??i.clientUri,logoUri:e.logoUri??i.logoUri,userCodeType:e.userCodeType??i.userCodeType,deviceCodeLifetime:e.deviceCodeLifetime??i.deviceCodeLifetime,consentLifetime:e.consentLifetime??i.consentLifetime,properties:((a=e.properties)==null?void 0:a.map(n=>({id:n.id,key:n.key,value:n.value})))??i.properties,claims:((u=e.claims)==null?void 0:u.map(n=>({id:n.id,key:n.type,value:n.value})))??i.claims}},J=(e,c)=>{var r,l;return{id:0,clientId:e.clientId??i.clientId,clientName:e.clientName??i.clientName,description:e.description??i.description,requireConsent:e.requireConsent??i.requireConsent,redirectUris:e.redirectUris??i.redirectUris,postLogoutRedirectUris:e.logoutUri?[e.logoutUri]:[],allowedScopes:(e.scopes??[]).map(t=>t.id),allowedGrantTypes:c,allowedCorsOrigins:[],requireDPoP:e.requireDPoP??i.requireDPoP,requirePushedAuthorization:e.requirePushedAuthorization??i.requirePushedAuthorization,allowOfflineAccess:e.allowOfflineAccess??i.allowOfflineAccess,requirePkce:e.requirePkce??i.requirePkce,requireClientSecret:e.requireClientSecret??i.requireClientSecret,authorizationCodeLifetime:e.authorizationCodeLifetime??i.authorizationCodeLifetime,absoluteRefreshTokenLifetime:i.absoluteRefreshTokenLifetime,accessTokenLifetime:i.accessTokenLifetime,consentLifetime:i.consentLifetime,accessTokenType:i.accessTokenType,allowAccessTokensViaBrowser:i.allowAccessTokenViaBrowser,allowPlainTextPkce:i.allowPlainTextPkce,allowRememberConsent:i.allowRememberConsent,alwaysIncludeUserClaimsInIdToken:i.alwaysIncludeUserClaimsInIdToken,alwaysSendClientClaims:i.alwaysSendClientClaims,frontChannelLogoutUri:i.frontChannelLogoutUri,frontChannelLogoutSessionRequired:i.frontChannelLogoutSessionRequired,backChannelLogoutUri:i.backChannelLogoutUri,backChannelLogoutSessionRequired:i.backChannelLogoutSessionRequired,clientUri:i.clientUri,enabled:i.enabled,enableLocalLogin:i.enableLocalLogin,identityTokenLifetime:i.identityTokenLifetime,includeJwtId:i.includeJti,logoUri:i.logoUri,clientClaimsPrefix:i.clientClaimsPrefix,pairWiseSubjectSalt:i.pairWiseSubjectSalt,protocolType:i.protocolType,refreshTokenExpiration:i.refreshTokenExpiration,refreshTokenUsage:i.refreshTokenUsage,slidingRefreshTokenLifetime:i.slidingRefreshTokenLifetime,updateAccessTokenClaimsOnRefresh:i.updateAccessTokenClaimsOnRefresh,coordinateLifetimeWithUserSession:i.coordinateLifetimeWithUserSession,identityProviderRestrictions:i.identityProviderRestrictions,userCodeType:i.userCodeType,deviceCodeLifetime:i.deviceCodeLifetime,requireRequestObject:i.requireRequestObject,cibaLifetime:i.cibaLifetime,pollingInterval:i.pollingInterval,dPoPValidationMode:Number(i.dPoPValidationMode),dPoPClockSkew:i.dPoPClockSkew,pushedAuthorizationLifetime:i.pushedAuthorizationLifetime,initiateLoginUri:i.initiateLoginUri,allowedIdentityTokenSigningAlgorithms:i.allowedIdentityTokenSigningAlgorithms,userSsoLifetime:i.userSsoLifetime,claims:((r=i.claims)==null?void 0:r.map(t=>new f({id:t.id,value:t.value,type:t.key})))??[],properties:((l=e.clientProperties)==null?void 0:l.map(t=>new k({id:0,key:t.key,value:t.value})))??[],updated:void 0,lastAccessed:void 0,nonEditable:!1}},F=(e,c)=>{var r,l,t,a,u,n;return{absoluteRefreshTokenLifetime:e.absoluteRefreshTokenLifetime,accessTokenLifetime:e.accessTokenLifetime,consentLifetime:e.consentLifetime,accessTokenType:e.accessTokenType,allowAccessTokensViaBrowser:e.allowAccessTokenViaBrowser,allowOfflineAccess:e.allowOfflineAccess,allowPlainTextPkce:e.allowPlainTextPkce,allowRememberConsent:e.allowRememberConsent,alwaysIncludeUserClaimsInIdToken:e.alwaysIncludeUserClaimsInIdToken,alwaysSendClientClaims:e.alwaysSendClientClaims,authorizationCodeLifetime:e.authorizationCodeLifetime,frontChannelLogoutUri:e.frontChannelLogoutUri||void 0,frontChannelLogoutSessionRequired:e.frontChannelLogoutSessionRequired,backChannelLogoutUri:e.backChannelLogoutUri||void 0,backChannelLogoutSessionRequired:e.backChannelLogoutSessionRequired,clientId:e.clientId,clientName:e.clientName,clientUri:e.clientUri||void 0,description:e.description||void 0,enabled:e.enabled,enableLocalLogin:e.enableLocalLogin,id:c,identityTokenLifetime:e.identityTokenLifetime,includeJwtId:e.includeJti,logoUri:e.logoUri||void 0,clientClaimsPrefix:e.clientClaimsPrefix||void 0,pairWiseSubjectSalt:e.pairWiseSubjectSalt||void 0,protocolType:e.protocolType||void 0,refreshTokenExpiration:e.refreshTokenExpiration,refreshTokenUsage:e.refreshTokenUsage,slidingRefreshTokenLifetime:e.slidingRefreshTokenLifetime,requireClientSecret:e.requireClientSecret,requireConsent:e.requireConsent,requirePkce:e.requirePkce,updateAccessTokenClaimsOnRefresh:e.updateAccessTokenClaimsOnRefresh,postLogoutRedirectUris:e.postLogoutRedirectUris??i.postLogoutRedirectUris,identityProviderRestrictions:e.identityProviderRestrictions??i.identityProviderRestrictions,redirectUris:e.redirectUris??i.redirectUris,allowedCorsOrigins:e.allowedCorsOrigins??i.allowedCorsOrigins,allowedGrantTypes:((r=e.allowedGrantTypes)==null?void 0:r.map(s=>s.id))??((l=i.allowedGrantTypes)==null?void 0:l.map(s=>s.id)),allowedScopes:((t=e.allowedScopes)==null?void 0:t.map(s=>s.id))??((a=i.allowedScopes)==null?void 0:a.map(s=>s.id)),userSsoLifetime:e.useSsoLifetime??i.useSsoLifetime,userCodeType:e.userCodeType??i.userCodeType,deviceCodeLifetime:e.deviceCodeLifetime??i.deviceCodeLifetime,requireRequestObject:e.requireRequestObject??i.requireRequestObject,cibaLifetime:e.cibaLifetime??i.cibaLifetime,pollingInterval:e.pollingInterval??i.pollingInterval,coordinateLifetimeWithUserSession:e.coordinateLifetimeWithUserSession,requireDPoP:e.requireDPoP,dPoPValidationMode:Number(e.dPoPValidationMode??i.dPoPValidationMode),dPoPClockSkew:e.dPoPClockSkew??i.dPoPClockSkew,pushedAuthorizationLifetime:e.pushedAuthorizationLifetime??i.pushedAuthorizationLifetime,requirePushedAuthorization:e.requirePushedAuthorization,initiateLoginUri:e.initiateLoginUri??i.initiateLoginUri,allowedIdentityTokenSigningAlgorithms:e.allowedIdentityTokenSigningAlgorithms??i.allowedIdentityTokenSigningAlgorithms,claims:((u=e.claims)==null?void 0:u.map(s=>new f({id:s.id,value:s.value,type:s.key})))??[],properties:((n=e.properties)==null?void 0:n.map(s=>new k({id:s.id,key:s.key,value:s.value})))??[],updated:void 0,lastAccessed:void 0,nonEditable:!1}},H=({clientName:e,clientId:c,modal:r,onClientDeleted:l})=>{const{t}=S(),a=T(),u=y(()=>q(Number(c)),{onSuccess:()=>{a.invalidateQueries(g.clients),a.invalidateQueries(g.configurationIssues),a.invalidateQueries(g.configurationIssuesSummary)}}),n=()=>{u.mutate(),r.closeModal(),w({title:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(R,{className:"h-5 w-5 text-green-500"}),p.jsx("span",{children:t("Actions.Hooray")})]}),description:t("Client.Actions.Deleted")}),l==null||l()};return p.jsx(U,{title:t("Actions.ConfirmDeletion"),isAlertOpen:r.isOpen,setIsAlertOpen:r.toggleModal,message:p.jsx(P,{i18nKey:"Client.Actions.DeleteClientConfirm",values:{clientName:e},components:{strong:p.jsx("strong",{className:"text-destructive"})}}),handleDelete:n})};export{v as C,H as D,I as G,_ as a,B as b,A as c,F as d,G as e,M as f,J as m,L as u};
