import{j as r,o as Re,M as In,U as kt,q as It,t as Pn,y as dt,W as Dn,X as En}from"./ui-vendor-B17-n605.js";import{u as Fn}from"./useSearch-BBsz3WbR.js";import{c as ie,D as Pt,x as Dt,y as Et,z as Ft,E as Mt,d as _t,B as P,G as Ot,L as Je,H as Mn,J as _n,h as ut,e as On,a as $t,M as $n,N as Vn,O as qn,P as Un,Q as zn,V as ft,W as et,X as Wn,Y as Gn,Z as Kn,_ as Bn,$ as Hn,a0 as mt,a1 as Yn,a2 as Zn,u as Xn,a3 as Qn,j as Jn}from"./index-DVaCOlPw.js";import{u as er,a as tr,g as nr}from"./ClientServices-CLHflzIx.js";import{T as le,a as de,b as E,c as q,d as ue,e as v,P as rr}from"./table-BGjshbTt.js";import{u as sr}from"./usePaginationTable-07dZaguv.js";import{a as h,L as We,R as W,j as ir}from"./react-vendor-DPOhIiRq.js";import{u as tt}from"./modalHooks-CXBaxWb4.js";import{C as O,m as ar,a as Ge,b as Vt,G as fe,c as L,D as or}from"./DeleteClientDialog-HIUb7cOA.js";import{u as V,T as nt}from"./i18n-vendor-TY_g4tCM.js";import{S as cr}from"./shield-1YTAmtkd.js";import{t as Te,F as Ae,S as lr,a as Z,R as dr,A as pt,L as ht}from"./FormRow-CDTEjXNe.js";import{u as Le,z as M}from"./form-vendor-DdiMXTjA.js";import{T as ke}from"./Tip-CpQkkZ_p.js";import{d as xt,c as ur,S as fr}from"./SecretForm-CkOrUfpw.js";import{c as mr,g as pr}from"./DateTimeHelper-8fem5lKY.js";import{C as qt,d as Ut,e as hr}from"./Card-DWFSUPWV.js";import{r as xr}from"./utils-BBmT1Bs5.js";import{I as br}from"./info-xxxE2Amv.js";import{H as yr}from"./Hoorey-DI6EUxZF.js";import{u as gr,a as Cr}from"./useConfirmUnsavedChanges-C06oKmnn.js";import{C as vr}from"./circle-check-big-ChNQ3xjz.js";import{c as ne}from"./index-DK_YO7nE.js";import{D as jr}from"./DataTable-CuhqpYks.js";import{E as Nr}from"./ellipsis-BsexDyDf.js";import{I as wr}from"./input-BXtLITbC.js";import{C as Sr}from"./circle-plus-DA3BdJZL.js";import"./useMutation-B5d3wT4v.js";import"./NumberHelper-XebQMFVY.js";import"./DeleteDialog-DMd7seyE.js";import"./alert-dialog-CVXOTxzg.js";import"./trash-c4wphaJi.js";import"./calendar-D3BrAClO.js";import"./table-vendor-Cc_vDqy9.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=ie("EarthLock",[["path",{d:"M7 3.34V5a3 3 0 0 0 3 3",key:"w732o8"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2 2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"f02343"}],["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M12 2a10 10 0 1 0 9.54 13",key:"zjsr6q"}],["path",{d:"M20 6V4a2 2 0 1 0-4 0v2",key:"1of5e8"}],["rect",{width:"8",height:"5",x:"14",y:"6",rx:"1",key:"1fmf51"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=ie("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=ie("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=ie("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=ie("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),Wt=h.createContext({formData:{},onHandleBack:()=>{},onHandleNext:()=>{},setFormData:()=>{},resetForm:()=>{},setFormSubmitted:()=>{},setFormSubmitting:()=>{},setActiveStep:()=>{},step:0,steps:[],formSubmitted:!1,formSubmitting:!1});function kr({children:e,initialFormData:t,steps:n}){const[s,i]=h.useState(t),[a,o]=h.useState(0),[c,d]=h.useState(!1),[l,u]=h.useState(!1),p=()=>{o(m=>Math.min(m+1,n.length-1))},g=()=>{o(m=>Math.max(m-1,0))},y=m=>{const b=n.indexOf(m);b!==-1&&o(b)},f=()=>{o(0),i(t),d(!1),u(!1)};return r.jsx(Wt.Provider,{value:{setActiveStep:y,formData:s,setFormData:i,onHandleBack:g,onHandleNext:p,resetForm:f,step:n[a],steps:n,formSubmitted:c,setFormSubmitted:d,formSubmitting:l,setFormSubmitting:u},children:e})}function K(){const e=h.useContext(Wt);if(!e)throw new Error("useFormState must be used within a FormProvider");return e}const Gt=h.createContext(null),Ir=({children:e,clientType:t,excludeOptions:n,additionData:s})=>{const[i,a]=h.useState(!1),{closeModal:o,isOpen:c,openModal:d,toggleModal:l}=tt(),u=h.useCallback(p=>{a(p)},[]);return r.jsx(Gt.Provider,{value:{stepErrors:i,setStepErrors:a,onValidation:u,clientType:t,excludeOptions:n,additionData:s,isOpen:c,openModal:d,closeModal:o,toggleModal:l},children:e})},B=()=>{const e=h.useContext(Gt);if(!e)throw new Error("useClientWizard must be used within a ClientWizardProvider");return e},me=({clientType:e,icon:t,description:n,title:s,onClientTypeSelected:i})=>{const{t:a}=V();return r.jsx("div",{className:"relative overflow-hidden rounded-lg border bg-background p-2",children:r.jsxs("div",{className:"flex h-[230px] flex-col justify-between rounded-md p-6",children:[t,r.jsxs("div",{className:"space-y-2 mt-2",children:[r.jsx("h3",{className:"font-bold",children:s}),r.jsx("p",{className:"text-sm text-muted-foreground",children:n}),r.jsx("p",{children:r.jsx(P,{size:"sm",onClick:()=>i(e),children:a("Actions.Create")})})]})]})})},Pr=({isOpen:e,onClose:t,onClientTypeSelected:n})=>{const{toggleModal:s}=B(),{t:i}=V(),a=o=>{n(o),t(),s(!0)};return r.jsx(Pt,{open:e,onOpenChange:t,children:r.jsxs(Dt,{className:"sm:max-w-[300px] max-h-[calc(100vh)] lg:max-w-[800px] overflow-auto",children:[r.jsx(Et,{children:r.jsx(Ft,{children:i("Client.Wizard.NewClient")})}),r.jsx(Mt,{children:i("Client.Wizard.ChooseClientTypeDescription")}),r.jsx("div",{className:"m-6",children:r.jsxs("div",{id:"features-stats",className:"mx-auto grid justify-center gap-4 sm:grid-cols-1 md:max-w-[64rem] md:grid-cols-2",children:[r.jsx(me,{onClientTypeSelected:a,clientType:O.Confidential,title:i("Client.Wizard.ConfidentialClientType"),icon:r.jsx(_t,{className:"h-12 w-12"}),description:i("Client.Wizard.ConfidentialClientTypeDescription")}),r.jsx(me,{onClientTypeSelected:a,clientType:O.Public,title:i("Client.Wizard.PublicClientType"),icon:r.jsx(Lr,{className:"h-12 w-12"}),description:i("Client.Wizard.PublicClientTypeDescription")}),r.jsx(me,{onClientTypeSelected:a,clientType:O.Machine,title:i("Client.Wizard.MachineClientType"),icon:r.jsx(Ar,{className:"h-12 w-12"}),description:i("Client.Wizard.MachineClientTypeDescription")}),r.jsx(me,{onClientTypeSelected:a,clientType:O.HighSecure,title:i("Client.Wizard.HighSecureClientType"),icon:r.jsx(cr,{className:"h-12 w-12"}),description:i("Client.Wizard.HighSecureClientTypeDescription")})]})})]})})},Ie=(e,t,n)=>{h.useEffect(()=>{const s=Object.keys(t).length>0;e(s)},[n,e,t])},Pe=(e,t,n)=>{h.useEffect(()=>{if(!t)return;Object.keys(n).forEach(i=>{const a=t[i];a!==void 0&&e.setValue(i,a,{shouldDirty:!0})})},[t,e,n])},De=(e,t)=>{const{setDirty:n}=Ot();h.useEffect(()=>{n(t,e.formState.isDirty)},[e.formState.isDirty,n,t])},Dr=e=>{const t=e("Client.Label.ClientId_Label"),n=e("Client.Label.ClientName_Label"),s=i=>e("Validation.FieldRequired",{field:i});return M.object({clientId:M.string().min(1,{message:s(t)}),clientName:M.string().min(1,{message:s(n)}),description:M.string().optional(),requireConsent:M.boolean().optional()})},bt={clientId:"",clientName:"",description:"",requireConsent:!0},pe=()=>{const{onHandleNext:e,setFormData:t,formData:n}=K(),{excludeOptions:s,onValidation:i}=B(),{t:a}=V(),o=Le({defaultValues:bt,resolver:Te(Dr(a)),mode:"onChange"});Pe(o,n,bt),Ie(i,o.formState.errors,o.getValues()),De(o,"basics");const c=d=>{t(l=>({...l,...d})),e()};return r.jsx(Ae,{...o,children:r.jsxs("form",{onSubmit:o.handleSubmit(c),children:[r.jsx(ke,{children:r.jsx(nt,{i18nKey:"Client.Tips.UniqueClientId",components:{strong:r.jsx("strong",{}),generate:r.jsx(lr,{className:"inline-block h-4"})}})}),r.jsx(Z,{name:"clientId",label:a("Client.Label.ClientId_Label"),description:a("Client.Label.ClientId_Info"),placeholder:a("Client.Label.ClientId_Label"),type:"input",inputSettings:{generateRandomValue:dr.ClientId,copyToClipboard:!0},required:!0,includeSeparator:!0}),r.jsx(Z,{name:"clientName",label:a("Client.Label.ClientName_Label"),description:a("Client.Label.ClientName_Info"),placeholder:a("Client.Label.ClientName_Label"),type:"input",required:!0,includeSeparator:!0}),r.jsx(Z,{name:"description",label:"Description",description:a("Client.Label.Description_Info"),placeholder:a("Client.Label.Description_Label"),type:"textarea"}),!(s!=null&&s.consent)&&r.jsx(Z,{name:"requireConsent",label:a("Client.Label.RequireConsent_Label"),description:a("Client.Label.RequireConsent_Info"),type:"switch"}),r.jsx("div",{className:"flex gap-4 justify-end mt-4",children:r.jsx(P,{type:"submit",className:"mt-4",children:a("Actions.Next")})})]})})},Er=e=>M.object({scopes:M.array(M.object({id:M.string(),label:M.string()})).min(1,{message:e("Client.Wizard.Validation.ScopesRequired")})}),yt={scopes:[]},he=()=>{const{onHandleNext:e,setFormData:t,onHandleBack:n,formData:s}=K(),{t:i}=V(),{excludeOptions:a,onValidation:o}=B(),c=Le({resolver:Te(Er(i)),defaultValues:yt,mode:"onChange"});Pe(c,s,yt),Ie(o,c.formState.errors,c.getValues()),De(c,"scopes");const d=u=>{t(p=>({...p,...u})),e()},l=er((a==null?void 0:a.identityResources)??!1,!1);return l.isLoading?r.jsx(Je,{}):r.jsx(Ae,{...c,children:r.jsxs("form",{onSubmit:c.handleSubmit(d),children:[r.jsxs(ke,{children:[i("Client.Tips.NoScopes"),r.jsx(P,{variant:"link",size:"sm",className:"h-auto p-0 underline",asChild:!0,children:r.jsxs(We,{to:Mn,className:"flex items-center gap-1 text-blue-600",target:"_blank",children:[r.jsx(pt,{className:"h-3 w-3"}),i("Client.Tips.NoScopesIdentityResource")]})})," ","or"," ",r.jsx(P,{variant:"link",size:"sm",className:"h-auto p-0 underline",asChild:!0,children:r.jsxs(We,{to:_n,className:"flex items-center gap-1 text-blue-600",target:"_blank",children:[r.jsx(pt,{className:"h-3 w-3"}),i("Client.Tips.NoScopesApiResource")]})}),"."]}),r.jsx(Z,{name:"scopes",label:i("Client.Label.AllowedScopes_Label"),description:i("Client.Label.AllowedScopes_Info"),type:"dualList",dualListSettings:{initialItems:l.data??[]}}),r.jsxs("div",{className:"flex justify-between mt-4",children:[r.jsx(P,{onClick:n,variant:"outline",children:i("Actions.Back")}),r.jsx(P,{type:"submit",children:i("Actions.Next")})]})]})})},$e=()=>{const{t:e}=V(),{onHandleNext:t,setFormData:n,formData:s,onHandleBack:i}=K(),{onValidation:a,clientType:o}=B(),c=Le({defaultValues:xt,resolver:Te(ur(e)),mode:"onChange"});Pe(c,s,xt),Ie(a,c.formState.errors,c.getValues()),De(c,"secret");const d=l=>{const u=mr(l.expiration,l.expirationTime);n(p=>({...p,...l,expiration:l.addExpiration?u:null})),t()};return r.jsx(Ae,{...c,children:r.jsxs("form",{onSubmit:c.handleSubmit(d),children:[o===O.HighSecure&&r.jsx(ke,{children:r.jsx(nt,{i18nKey:"Client.Tips.HighSecureAuth",components:{strong:r.jsx("strong",{})}})}),r.jsx(fr,{form:c}),r.jsxs("div",{className:"flex justify-between mt-4",children:[r.jsx(P,{onClick:i,variant:"outline",children:e("Actions.Back")}),r.jsx(P,{type:"submit",children:e("Actions.Next")})]})]})})};function Fr(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function Mr(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var _r=function(){function e(n){var s=this;this._insertTag=function(i){var a;s.tags.length===0?s.insertionPoint?a=s.insertionPoint.nextSibling:s.prepend?a=s.container.firstChild:a=s.before:a=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(i,a),s.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(s){s.forEach(this._insertTag)},t.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Mr(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var a=Fr(i);try{a.insertRule(s,a.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(s));this.ctr++},t.flush=function(){this.tags.forEach(function(s){var i;return(i=s.parentNode)==null?void 0:i.removeChild(s)}),this.tags=[],this.ctr=0},e}(),F="-ms-",je="-moz-",j="-webkit-",Kt="comm",rt="rule",st="decl",Or="@import",Bt="@keyframes",$r="@layer",Vr=Math.abs,Ee=String.fromCharCode,qr=Object.assign;function Ur(e,t){return I(e,0)^45?(((t<<2^I(e,0))<<2^I(e,1))<<2^I(e,2))<<2^I(e,3):0}function Ht(e){return e.trim()}function zr(e,t){return(e=t.exec(e))?e[0]:e}function N(e,t,n){return e.replace(t,n)}function Ke(e,t){return e.indexOf(t)}function I(e,t){return e.charCodeAt(t)|0}function re(e,t,n){return e.slice(t,n)}function U(e){return e.length}function it(e){return e.length}function xe(e,t){return t.push(e),e}function Wr(e,t){return e.map(t).join("")}var Fe=1,Q=1,Yt=0,_=0,T=0,ee="";function Me(e,t,n,s,i,a,o){return{value:e,root:t,parent:n,type:s,props:i,children:a,line:Fe,column:Q,length:o,return:""}}function te(e,t){return qr(Me("",null,null,"",null,null,0),e,{length:-e.length},t)}function Gr(){return T}function Kr(){return T=_>0?I(ee,--_):0,Q--,T===10&&(Q=1,Fe--),T}function $(){return T=_<Yt?I(ee,_++):0,Q++,T===10&&(Q=1,Fe++),T}function z(){return I(ee,_)}function ge(){return _}function ae(e,t){return re(ee,e,t)}function se(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Zt(e){return Fe=Q=1,Yt=U(ee=e),_=0,[]}function Xt(e){return ee="",e}function Ce(e){return Ht(ae(_-1,Be(e===91?e+2:e===40?e+1:e)))}function Br(e){for(;(T=z())&&T<33;)$();return se(e)>2||se(T)>3?"":" "}function Hr(e,t){for(;--t&&$()&&!(T<48||T>102||T>57&&T<65||T>70&&T<97););return ae(e,ge()+(t<6&&z()==32&&$()==32))}function Be(e){for(;$();)switch(T){case e:return _;case 34:case 39:e!==34&&e!==39&&Be(T);break;case 40:e===41&&Be(e);break;case 92:$();break}return _}function Yr(e,t){for(;$()&&e+T!==57;)if(e+T===84&&z()===47)break;return"/*"+ae(t,_-1)+"*"+Ee(e===47?e:$())}function Zr(e){for(;!se(z());)$();return ae(e,_)}function Xr(e){return Xt(ve("",null,null,null,[""],e=Zt(e),0,[0],e))}function ve(e,t,n,s,i,a,o,c,d){for(var l=0,u=0,p=o,g=0,y=0,f=0,m=1,b=1,x=1,C=0,S="",A=i,R=a,D=s,w=S;b;)switch(f=C,C=$()){case 40:if(f!=108&&I(w,p-1)==58){Ke(w+=N(Ce(C),"&","&\f"),"&\f")!=-1&&(x=-1);break}case 34:case 39:case 91:w+=Ce(C);break;case 9:case 10:case 13:case 32:w+=Br(f);break;case 92:w+=Hr(ge()-1,7);continue;case 47:switch(z()){case 42:case 47:xe(Qr(Yr($(),ge()),t,n),d);break;default:w+="/"}break;case 123*m:c[l++]=U(w)*x;case 125*m:case 59:case 0:switch(C){case 0:case 125:b=0;case 59+u:x==-1&&(w=N(w,/\f/g,"")),y>0&&U(w)-p&&xe(y>32?Ct(w+";",s,n,p-1):Ct(N(w," ","")+";",s,n,p-2),d);break;case 59:w+=";";default:if(xe(D=gt(w,t,n,l,u,i,c,S,A=[],R=[],p),a),C===123)if(u===0)ve(w,t,D,D,A,a,p,c,R);else switch(g===99&&I(w,3)===110?100:g){case 100:case 108:case 109:case 115:ve(e,D,D,s&&xe(gt(e,D,D,0,0,i,c,S,i,A=[],p),R),i,R,p,c,s?A:R);break;default:ve(w,D,D,D,[""],R,0,c,R)}}l=u=y=0,m=x=1,S=w="",p=o;break;case 58:p=1+U(w),y=f;default:if(m<1){if(C==123)--m;else if(C==125&&m++==0&&Kr()==125)continue}switch(w+=Ee(C),C*m){case 38:x=u>0?1:(w+="\f",-1);break;case 44:c[l++]=(U(w)-1)*x,x=1;break;case 64:z()===45&&(w+=Ce($())),g=z(),u=p=U(S=w+=Zr(ge())),C++;break;case 45:f===45&&U(w)==2&&(m=0)}}return a}function gt(e,t,n,s,i,a,o,c,d,l,u){for(var p=i-1,g=i===0?a:[""],y=it(g),f=0,m=0,b=0;f<s;++f)for(var x=0,C=re(e,p+1,p=Vr(m=o[f])),S=e;x<y;++x)(S=Ht(m>0?g[x]+" "+C:N(C,/&\f/g,g[x])))&&(d[b++]=S);return Me(e,t,n,i===0?rt:c,d,l,u)}function Qr(e,t,n){return Me(e,t,n,Kt,Ee(Gr()),re(e,2,-2),0)}function Ct(e,t,n,s){return Me(e,t,n,st,re(e,0,s),re(e,s+1,-1),s)}function X(e,t){for(var n="",s=it(e),i=0;i<s;i++)n+=t(e[i],i,e,t)||"";return n}function Jr(e,t,n,s){switch(e.type){case $r:if(e.children.length)break;case Or:case st:return e.return=e.return||e.value;case Kt:return"";case Bt:return e.return=e.value+"{"+X(e.children,s)+"}";case rt:e.value=e.props.join(",")}return U(n=X(e.children,s))?e.return=e.value+"{"+n+"}":""}function es(e){var t=it(e);return function(n,s,i,a){for(var o="",c=0;c<t;c++)o+=e[c](n,s,i,a)||"";return o}}function ts(e){return function(t){t.root||(t=t.return)&&e(t)}}function ns(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var rs=function(t,n,s){for(var i=0,a=0;i=a,a=z(),i===38&&a===12&&(n[s]=1),!se(a);)$();return ae(t,_)},ss=function(t,n){var s=-1,i=44;do switch(se(i)){case 0:i===38&&z()===12&&(n[s]=1),t[s]+=rs(_-1,n,s);break;case 2:t[s]+=Ce(i);break;case 4:if(i===44){t[++s]=z()===58?"&\f":"",n[s]=t[s].length;break}default:t[s]+=Ee(i)}while(i=$());return t},is=function(t,n){return Xt(ss(Zt(t),n))},vt=new WeakMap,as=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,s=t.parent,i=t.column===s.column&&t.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!vt.get(s))&&!i){vt.set(t,!0);for(var a=[],o=is(n,a),c=s.props,d=0,l=0;d<o.length;d++)for(var u=0;u<c.length;u++,l++)t.props[l]=a[d]?o[d].replace(/&\f/g,c[u]):c[u]+" "+o[d]}}},os=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function Qt(e,t){switch(Ur(e,t)){case 5103:return j+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return j+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return j+e+je+e+F+e+e;case 6828:case 4268:return j+e+F+e+e;case 6165:return j+e+F+"flex-"+e+e;case 5187:return j+e+N(e,/(\w+).+(:[^]+)/,j+"box-$1$2"+F+"flex-$1$2")+e;case 5443:return j+e+F+"flex-item-"+N(e,/flex-|-self/,"")+e;case 4675:return j+e+F+"flex-line-pack"+N(e,/align-content|flex-|-self/,"")+e;case 5548:return j+e+F+N(e,"shrink","negative")+e;case 5292:return j+e+F+N(e,"basis","preferred-size")+e;case 6060:return j+"box-"+N(e,"-grow","")+j+e+F+N(e,"grow","positive")+e;case 4554:return j+N(e,/([^-])(transform)/g,"$1"+j+"$2")+e;case 6187:return N(N(N(e,/(zoom-|grab)/,j+"$1"),/(image-set)/,j+"$1"),e,"")+e;case 5495:case 3959:return N(e,/(image-set\([^]*)/,j+"$1$`$1");case 4968:return N(N(e,/(.+:)(flex-)?(.*)/,j+"box-pack:$3"+F+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+j+e+e;case 4095:case 3583:case 4068:case 2532:return N(e,/(.+)-inline(.+)/,j+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(U(e)-1-t>6)switch(I(e,t+1)){case 109:if(I(e,t+4)!==45)break;case 102:return N(e,/(.+:)(.+)-([^]+)/,"$1"+j+"$2-$3$1"+je+(I(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Ke(e,"stretch")?Qt(N(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(I(e,t+1)!==115)break;case 6444:switch(I(e,U(e)-3-(~Ke(e,"!important")&&10))){case 107:return N(e,":",":"+j)+e;case 101:return N(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+j+(I(e,14)===45?"inline-":"")+"box$3$1"+j+"$2$3$1"+F+"$2box$3")+e}break;case 5936:switch(I(e,t+11)){case 114:return j+e+F+N(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return j+e+F+N(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return j+e+F+N(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return j+e+F+e+e}return e}var cs=function(t,n,s,i){if(t.length>-1&&!t.return)switch(t.type){case st:t.return=Qt(t.value,t.length);break;case Bt:return X([te(t,{value:N(t.value,"@","@"+j)})],i);case rt:if(t.length)return Wr(t.props,function(a){switch(zr(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return X([te(t,{props:[N(a,/:(read-\w+)/,":"+je+"$1")]})],i);case"::placeholder":return X([te(t,{props:[N(a,/:(plac\w+)/,":"+j+"input-$1")]}),te(t,{props:[N(a,/:(plac\w+)/,":"+je+"$1")]}),te(t,{props:[N(a,/:(plac\w+)/,F+"input-$1")]})],i)}return""})}},ls=[cs],ds=function(t){var n=t.key;if(n==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(m){var b=m.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var i=t.stylisPlugins||ls,a={},o,c=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(m){for(var b=m.getAttribute("data-emotion").split(" "),x=1;x<b.length;x++)a[b[x]]=!0;c.push(m)});var d,l=[as,os];{var u,p=[Jr,ts(function(m){u.insert(m)})],g=es(l.concat(i,p)),y=function(b){return X(Xr(b),g)};d=function(b,x,C,S){u=C,y(b?b+"{"+x.styles+"}":x.styles),S&&(f.inserted[x.name]=!0)}}var f={key:n,sheet:new _r({key:n,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:a,registered:{},insert:d};return f.sheet.hydrate(c),f};function us(e){for(var t=0,n,s=0,i=e.length;i>=4;++s,i-=4)n=e.charCodeAt(s)&255|(e.charCodeAt(++s)&255)<<8|(e.charCodeAt(++s)&255)<<16|(e.charCodeAt(++s)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(s+2)&255)<<16;case 2:t^=(e.charCodeAt(s+1)&255)<<8;case 1:t^=e.charCodeAt(s)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var fs={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ms=/[A-Z]|^ms/g,ps=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Jt=function(t){return t.charCodeAt(1)===45},jt=function(t){return t!=null&&typeof t!="boolean"},Ve=ns(function(e){return Jt(e)?e:e.replace(ms,"-$&").toLowerCase()}),Nt=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(ps,function(s,i,a){return H={name:i,styles:a,next:H},i})}return fs[t]!==1&&!Jt(t)&&typeof n=="number"&&n!==0?n+"px":n};function Ne(e,t,n){if(n==null)return"";var s=n;if(s.__emotion_styles!==void 0)return s;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return H={name:i.name,styles:i.styles,next:H},i.name;var a=n;if(a.styles!==void 0){var o=a.next;if(o!==void 0)for(;o!==void 0;)H={name:o.name,styles:o.styles,next:H},o=o.next;var c=a.styles+";";return c}return hs(e,t,n)}}var d=n;if(t==null)return d;var l=t[d];return l!==void 0?l:d}function hs(e,t,n){var s="";if(Array.isArray(n))for(var i=0;i<n.length;i++)s+=Ne(e,t,n[i])+";";else for(var a in n){var o=n[a];if(typeof o!="object"){var c=o;t!=null&&t[c]!==void 0?s+=a+"{"+t[c]+"}":jt(c)&&(s+=Ve(a)+":"+Nt(a,c)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var d=0;d<o.length;d++)jt(o[d])&&(s+=Ve(a)+":"+Nt(a,o[d])+";");else{var l=Ne(e,t,o);switch(a){case"animation":case"animationName":{s+=Ve(a)+":"+l+";";break}default:s+=a+"{"+l+"}"}}}return s}var wt=/label:\s*([^\s;{]+)\s*(;|$)/g,H;function qe(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var s=!0,i="";H=void 0;var a=e[0];if(a==null||a.raw===void 0)s=!1,i+=Ne(n,t,a);else{var o=a;i+=o[0]}for(var c=1;c<e.length;c++)if(i+=Ne(n,t,e[c]),s){var d=a;i+=d[c]}wt.lastIndex=0;for(var l="",u;(u=wt.exec(i))!==null;)l+="-"+u[1];var p=us(i)+l;return{name:p,styles:i,next:H}}function en(e,t,n){var s="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):i&&(s+=i+" ")}),s}var xs=function(t,n,s){var i=t.key+"-"+n.name;t.registered[i]===void 0&&(t.registered[i]=n.styles)},bs=function(t,n,s){xs(t,n);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var a=n;do t.insert(n===a?"."+i:"",a,t.sheet,!0),a=a.next;while(a!==void 0)}};function St(e,t){if(e.inserted[t.name]===void 0)return e.insert("",t,e.sheet,!0)}function Rt(e,t,n){var s=[],i=en(e,s,n);return s.length<2?n:i+t(s)}var ys=function(t){var n=ds(t);n.sheet.speedy=function(c){this.isSpeedy=c},n.compat=!0;var s=function(){for(var d=arguments.length,l=new Array(d),u=0;u<d;u++)l[u]=arguments[u];var p=qe(l,n.registered,void 0);return bs(n,p),n.key+"-"+p.name},i=function(){for(var d=arguments.length,l=new Array(d),u=0;u<d;u++)l[u]=arguments[u];var p=qe(l,n.registered),g="animation-"+p.name;return St(n,{name:p.name,styles:"@keyframes "+g+"{"+p.styles+"}"}),g},a=function(){for(var d=arguments.length,l=new Array(d),u=0;u<d;u++)l[u]=arguments[u];var p=qe(l,n.registered);St(n,p)},o=function(){for(var d=arguments.length,l=new Array(d),u=0;u<d;u++)l[u]=arguments[u];return Rt(n.registered,s,gs(l))};return{css:s,cx:o,injectGlobal:a,keyframes:i,hydrate:function(d){d.forEach(function(l){n.inserted[l]=!0})},flush:function(){n.registered={},n.inserted={},n.sheet.flush()},sheet:n.sheet,cache:n,getRegisteredStyles:en.bind(null,n.registered),merge:Rt.bind(null,n.registered,s)}},gs=function e(t){for(var n="",s=0;s<t.length;s++){var i=t[s];if(i!=null){var a=void 0;switch(typeof i){case"boolean":break;case"object":{if(Array.isArray(i))a=e(i);else{a="";for(var o in i)i[o]&&o&&(a&&(a+=" "),a+=o)}break}default:a=i}a&&(n&&(n+=" "),n+=a)}}return n},tn=ys({key:"css"}),Cs=tn.cx,oe=tn.css;const nn=oe`
  content: "";
  position: absolute;
  top: 0;
  height: var(--tree-line-height);
  box-sizing: border-box;
`,vs=oe`
  display: flex;
  padding-inline-start: 0;
  margin: 0;
  padding-top: var(--tree-line-height);
  position: relative;

  ::before {
    ${nn};
    left: calc(50% - var(--tree-line-width) / 2);
    width: 0;
    border-left: var(--tree-line-width) var(--tree-node-line-style)
      var(--tree-line-color);
  }
`,js=oe`
  flex: auto;
  text-align: center;
  list-style-type: none;
  position: relative;
  padding: var(--tree-line-height) var(--tree-node-padding) 0
    var(--tree-node-padding);
  word-break: break-all;
`,Ns=oe`
  ::before,
  ::after {
    ${nn};
    right: 50%;
    width: 50%;
    border-top: var(--tree-line-width) var(--tree-node-line-style)
      var(--tree-line-color);
  }
  ::after {
    left: 50%;
    border-left: var(--tree-line-width) var(--tree-node-line-style)
      var(--tree-line-color);
  }

  :only-of-type {
    padding: 0;
    ::after,
    :before {
      display: none;
    }
  }

  :first-of-type {
    ::before {
      border: 0 none;
    }
    ::after {
      border-radius: var(--tree-line-border-radius) 0 0 0;
    }
  }

  :last-of-type {
    ::before {
      border-right: var(--tree-line-width) var(--tree-node-line-style)
        var(--tree-line-color);
      border-radius: 0 var(--tree-line-border-radius) 0 0;
    }
    ::after {
      border: 0 none;
    }
  }
`;function He({children:e,label:t,className:n}){return r.jsxs("li",{className:Cs(js,Ns,n),children:[t,h.Children.count(e)>0&&r.jsx("ul",{className:vs,children:e})]})}function ws({children:e,label:t,lineHeight:n="20px",lineWidth:s="1px",lineColor:i="#e2e8f0",nodePadding:a="5px",lineStyle:o="solid",lineBorderRadius:c="5px"}){return r.jsx("ul",{className:oe`
        padding-inline-start: 0;
        margin: 0;
        display: flex;

        --line-height: ${n};
        --line-width: ${s};
        --line-color: ${i};
        --line-border-radius: ${c};
        --line-style: ${o};
        --node-padding: ${a};

        --tree-line-height: var(--line-height, 20px);
        --tree-line-width: var(--line-width, 1px);
        --tree-line-color: var(--line-color, black);
        --tree-line-border-radius: var(--line-border-radius, 5px);
        --tree-node-line-style: var(--line-style, solid);
        --tree-node-padding: var(--node-padding, 5px);
      `,children:r.jsx(He,{label:t,children:e})})}var Tt=xr();const rn={requirePkce:{labelKey:"Client.Label.RequirePkce_Label",format:(e,t)=>t(e?"Actions.Yes":"Actions.No")},requireDPoP:{labelKey:"Client.Label.RequireDPoP_Label",format:(e,t)=>t(e?"Actions.Yes":"Actions.No")},requirePushedAuthorization:{labelKey:"Client.Label.RequirePushedAuthorization_Label",format:(e,t)=>t(e?"Actions.Yes":"Actions.No")},allowOfflineAccess:{labelKey:"Client.Label.AllowOfflineAccess_Label",format:(e,t)=>t(e?"Actions.Yes":"Actions.No")},requireClientSecret:{labelKey:"Client.Label.RequireClientSecret_Label",format:(e,t)=>t(e?"Actions.Yes":"Actions.No")},authorizationCodeLifetime:{labelKey:"Client.Label.AuthorizationCodeLifetime_Label",format:e=>`${e} s`}},at={[O.Confidential]:{enforcedValues:{requirePkce:!0},descriptionLabels:["Client.Label.RequirePkce_Label"],lockedFields:["requirePkce"]},[O.Public]:{enforcedValues:{requirePkce:!0},descriptionLabels:["Client.Label.RequirePkce_Label"],lockedFields:["requirePkce"]},[O.HighSecure]:{enforcedValues:{requirePkce:!0,requireDPoP:!0,requirePushedAuthorization:!0,allowOfflineAccess:!0,requireClientSecret:!0,authorizationCodeLifetime:60},descriptionLabels:["Client.Label.RequirePkce_Label","Client.Label.RequireDPoP_Label","Client.Label.RequirePushedAuthorization_Label","Client.Label.AllowOfflineAccess_Label","Client.Label.RequireClientSecret_Label","Client.Label.AuthorizationCodeLifetime_Label"],lockedFields:["requirePkce","requireDPoP","requirePushedAuthorization","allowOfflineAccess","requireClientSecret","authorizationCodeLifetime"]},[O.Machine]:{enforcedValues:{},descriptionLabels:[],lockedFields:[]}},Ss=()=>{var y;const{formData:e,setActiveStep:t}=K(),{excludeOptions:n,clientType:s}=B(),{t:i}=V(),a=s?at[s]:void 0,o=f=>{const m="w-5 h-5 text-primary/70";switch(f){case"Client Info":return r.jsx(br,{className:m});case"Secret":return r.jsx(ut,{className:m});case"URI":return r.jsx(Tr,{className:m});case"Scopes":return r.jsx(On,{className:m});default:return null}},c=({label:f,value:m,locked:b})=>r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"font-medium",children:[f,":"]}),r.jsx("span",{children:m}),b?r.jsx(ut,{className:"w-4 h-4 opacity-70"}):null]}),d=({step:f,name:m,type:b,value:x,avatar:C})=>{const S=(A,R)=>r.jsxs("li",{className:"flex items-start gap-4 mb-1 group",children:[r.jsx("div",{className:"flex-shrink-0 p-2 rounded-lg bg-primary/5 group-hover:bg-primary/10 transition-colors",children:o(b)}),r.jsx("span",{className:"text-sm leading-relaxed break-words pt-0.5",children:A})]},R??0);return r.jsx(qt,{className:`${C?"w-[400px] min-h-[180px]":"w-[320px] min-h-[140px]"} shrink-0 transition-all duration-300 hover:shadow-lg hover:-translate-y-1 ${C?"bg-gradient-to-br from-primary/5 to-background border-primary/20":"hover:border-primary/10"}`,children:r.jsx(Ut,{className:"p-5",children:r.jsxs("div",{className:"flex flex-col items-center",children:[C&&r.jsx("div",{className:"p-3 rounded-full bg-primary/10 mb-1 mt-1",children:r.jsx(Rr,{className:"w-7 h-7 text-primary"})}),r.jsx("div",{className:"text-center w-full mb-3",children:r.jsxs("div",{className:"flex items-center justify-center gap-3",children:[r.jsx("h3",{className:`font-semibold ${C?"text-lg text-primary":"text-base"}`,children:m}),r.jsx(P,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 rounded-full hover:bg-primary/10 hover:scale-110 transition-all duration-200",onClick:()=>t(f),children:r.jsx(zt,{className:"w-4 h-4"})})]})}),r.jsx("div",{className:"w-full",children:Array.isArray(x)?r.jsx("ul",{className:"space-y-1 list-none p-0",children:x.map((A,R)=>S(A,R))}):r.jsx("ul",{className:"space-y-0 list-none p-0",children:S(x,0)})})]})})})},l=f=>i(f?"Actions.Yes":"Actions.No"),u=W.useMemo(()=>{var b;if(!a||!a.enforcedValues)return[];const f=[],m=Object.keys(a.enforcedValues);for(const x of m){const C=a.enforcedValues[x];if(C===void 0)continue;const S=rn[x];if(!S)continue;const A=String(i(S.labelKey));let R;typeof S.format=="function"?R=S.format(C,i):R=String(C);const D=!!((b=a.lockedFields)!=null&&b.includes(x));f.push(r.jsx(c,{label:A,value:R,locked:D},x))}return f},[a,i]),p=[r.jsx(c,{label:i("Client.Label.ClientType_Label"),value:`${Tt.startCase(s)} Client`},"clientType"),...n!=null&&n.consent?[]:[r.jsx(c,{label:i("Client.Label.RequireConsent_Label"),value:l(e.requireConsent)},"requireConsent")],...e.description?[e.description]:[],...u],g={step:1,name:e.clientName,avatar:!0,type:"Client Info",value:p,children:[...n!=null&&n.uris?[]:[{step:2,name:i("Client.Summary.RedirectUris"),type:"URI",value:e.redirectUris},...e.logoutUri?[{step:2,name:i("Client.Summary.LogoutUri"),type:"URI",value:e.logoutUri}]:[]],{step:3,name:i("Client.Summary.Scopes"),type:"Scopes",value:e.scopes.map(f=>f.label)},...n!=null&&n.secrets?[]:[{step:4,name:i("Client.Summary.ClientSecret"),type:"Secret",value:[Tt.startCase(e.secretType)]}]]};return r.jsx("div",{className:"bg-gradient-to-br from-background via-muted/20 to-background p-4 rounded-xl border shadow-sm",children:r.jsx("div",{className:"relative w-full overflow-x-auto pb-2",children:r.jsx("div",{className:"relative left-1/2 -translate-x-1/2 inline-block",children:r.jsx(ws,{lineColor:"hsl(var(--primary) / 0.2)",lineWidth:"2px",lineHeight:"20px",nodePadding:"8px",lineBorderRadius:"6px",label:r.jsx("div",{className:"inline-flex justify-center items-center text-center animate-in fade-in duration-700",children:r.jsx(d,{...g})}),children:(y=g.children)==null?void 0:y.map((f,m)=>{var b;return r.jsx(He,{label:r.jsx("div",{className:"inline-flex justify-center items-center text-center animate-in slide-in-from-top duration-700",style:{animationDelay:`${m*150}ms`},children:r.jsx(d,{...f})}),children:(b=f.children)==null?void 0:b.map((x,C)=>r.jsx(He,{label:r.jsx("div",{className:"inline-flex justify-center items-center text-center animate-in slide-in-from-bottom duration-700",style:{animationDelay:`${(m+C+2)*100}ms`},children:r.jsx(d,{...x})})},x.name))},f.name)})})})})})},Rs=()=>{const{formData:e,setActiveStep:t}=K(),{t:n}=V(),{excludeOptions:s,clientType:i}=B(),a=(c,d=!1)=>r.jsx(P,{variant:"outline",size:"sm",onClick:()=>t(c),className:"p-2",disabled:d,children:r.jsx(zt,{className:"h-4 w-4"})}),o=i?at[i]:void 0;return r.jsxs("div",{children:[r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-semibold",children:n("Client.Label.ClientDetails")}),r.jsxs(le,{children:[r.jsx(de,{children:r.jsxs(E,{className:"flex flex-row",children:[r.jsx(q,{className:"flex-1 p-2",children:n("Client.Label.Field")}),r.jsx(q,{className:"flex-1 p-2",children:n("Client.Label.Value")}),r.jsx(q,{className:"flex-1 p-2 flex justify-end me-1",children:n("Actions.Edit")})]})}),r.jsxs(ue,{children:[r.jsxs(E,{className:"flex flex-row",children:[r.jsx(v,{className:"flex-1 p-2",children:n("Client.Label.ClientId_Label")}),r.jsx(v,{className:"flex-1 p-2",children:e.clientId}),r.jsx(v,{className:"flex-1 p-2 flex justify-end",children:a(1)})]}),r.jsxs(E,{className:"flex flex-row",children:[r.jsx(v,{className:"flex-1 p-2",children:n("Client.Label.ClientName_Label")}),r.jsx(v,{className:"flex-1 p-2",children:e.clientName}),r.jsx(v,{className:"flex-1 p-2 flex justify-end",children:a(1)})]}),r.jsxs(E,{className:"flex flex-row",children:[r.jsx(v,{className:"flex-1 p-2",children:n("Client.Label.Description_Label")}),r.jsx(v,{className:"flex-1 p-2",children:e.description}),r.jsx(v,{className:"flex-1 p-2 flex justify-end",children:a(1)})]}),!(s!=null&&s.consent)&&r.jsxs(E,{className:"flex flex-row",children:[r.jsx(v,{className:"flex-1 p-2",children:n("Client.Label.RequireConsent_Label")}),r.jsx(v,{className:"flex-1 p-2",children:e.requireConsent?n("Actions.Yes"):n("Actions.No")}),r.jsx(v,{className:"flex-1 p-2 flex justify-end",children:a(1)})]}),o&&Object.keys(o.enforcedValues).map(c=>{const d=o.enforcedValues[c];if(d===void 0)return null;const l=rn[c];return l?r.jsxs(E,{className:"flex flex-row",children:[r.jsx(v,{className:"flex-1 p-2",children:n(l.labelKey)}),r.jsx(v,{className:"flex-1 p-2",children:l.format?l.format(d,n):String(d)}),r.jsx(v,{className:"flex-1 p-2 flex justify-end",children:a(1,!0)})]},c):null})]})]})]}),!(s!=null&&s.uris)&&r.jsxs("section",{className:"mt-3",children:[r.jsx("h2",{className:"text-xl font-semibold",children:n("Client.Label.RedirectLogoutUrisTitle")}),r.jsxs(le,{children:[r.jsx(de,{children:r.jsxs(E,{className:"flex flex-row",children:[r.jsx(q,{className:"flex-1 p-2",children:n("Client.Label.Field")}),r.jsx(q,{className:"flex-1 p-2",children:n("Client.Label.Value")}),r.jsx(q,{className:"flex-1 p-2 flex justify-end me-1",children:n("Actions.Edit")})]})}),r.jsxs(ue,{children:[r.jsxs(E,{className:"flex flex-row",children:[r.jsx(v,{className:"flex-1 p-2",children:n("Client.Label.RedirectUris_Label")}),r.jsx(v,{className:"flex-1 p-2",children:e.redirectUris.join(", ")}),r.jsx(v,{className:"flex-1 p-2 flex justify-end",children:a(2)})]}),r.jsxs(E,{className:"flex flex-row",children:[r.jsx(v,{className:"flex-1 p-2",children:n("Client.Label.PostLogoutRedirectUris_Label")}),r.jsx(v,{className:"flex-1 p-2",children:e.logoutUri}),r.jsx(v,{className:"flex-1 p-2 flex justify-end",children:a(2)})]})]})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-semibold",children:n("Client.Tabs.Scopes")}),r.jsxs(le,{children:[r.jsx(de,{children:r.jsxs(E,{className:"flex flex-row",children:[r.jsx(q,{className:"flex-1 p-2"}),r.jsx(q,{className:"flex-1 p-2 flex justify-end me-1",children:n("Actions.Edit")})]})}),r.jsx(ue,{children:e.scopes.map(c=>r.jsxs(E,{className:"flex flex-row",children:[r.jsx(v,{className:"flex-1 p-2",children:c.label}),r.jsx(v,{className:"flex-1 p-2 flex justify-end",children:a(3)})]},c.id))})]})]}),!(s!=null&&s.secrets)&&r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-semibold",children:n("Client.Tabs.Secrets")}),r.jsxs(le,{children:[r.jsx(de,{children:r.jsxs(E,{className:"flex flex-row",children:[r.jsx(q,{className:"flex-1 p-2",children:n("Client.Label.Field")}),r.jsx(q,{className:"flex-1 p-2",children:n("Client.Label.Value")}),r.jsx(q,{className:"flex-1 p-2 flex justify-end me-1",children:n("Actions.Edit")})]})}),r.jsxs(ue,{children:[r.jsxs(E,{className:"flex flex-row",children:[r.jsx(v,{className:"flex-1 p-2",children:n("Client.Label.SecretType_Label")}),r.jsx(v,{className:"flex-1 p-2",children:e.secretType}),r.jsx(v,{className:"flex-1 p-2 flex justify-end",children:a(4)})]}),r.jsxs(E,{className:"flex flex-row",children:[r.jsx(v,{className:"flex-1 p-2",children:n("Client.Label.SecretDescription_Label")}),r.jsx(v,{className:"flex-1 p-2",children:e.secretDescription}),r.jsx(v,{className:"flex-1 p-2 flex justify-end",children:a(4)})]}),e.addExpiration&&r.jsxs(r.Fragment,{children:[r.jsxs(E,{className:"flex flex-row",children:[r.jsx(v,{className:"flex-1 p-2",children:n("Client.Label.ClientSecret_ExpirationDate")}),r.jsx(v,{className:"flex-1 p-2",children:e.expiration?new Date(e.expiration).toLocaleDateString():"-"}),r.jsx(v,{className:"flex-1 p-2 flex justify-end",children:a(4)})]}),r.jsxs(E,{className:"flex flex-row",children:[r.jsx(v,{className:"flex-1 p-2",children:n("Client.Label.ClientSecret_ExpirationTime")}),r.jsx(v,{className:"flex-1 p-2",children:e.expirationTime}),r.jsx(v,{className:"flex-1 p-2 flex justify-end",children:a(4)})]})]})]})]})]})]})};function G(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function At(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function sn(...e){return t=>{let n=!1;const s=e.map(i=>{const a=At(i,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<s.length;i++){const a=s[i];typeof a=="function"?a():At(e[i],null)}}}}function J(...e){return h.useCallback(sn(...e),e)}var we=h.forwardRef((e,t)=>{const{children:n,...s}=e,i=h.Children.toArray(n),a=i.find(As);if(a){const o=a.props.children,c=i.map(d=>d===a?h.Children.count(o)>1?h.Children.only(null):h.isValidElement(o)?o.props.children:null:d);return r.jsx(Ye,{...s,ref:t,children:h.isValidElement(o)?h.cloneElement(o,void 0,c):null})}return r.jsx(Ye,{...s,ref:t,children:n})});we.displayName="Slot";var Ye=h.forwardRef((e,t)=>{const{children:n,...s}=e;if(h.isValidElement(n)){const i=ks(n);return h.cloneElement(n,{...Ls(s,n.props),ref:t?sn(t,i):i})}return h.Children.count(n)>1?h.Children.only(null):null});Ye.displayName="SlotClone";var Ts=({children:e})=>r.jsx(r.Fragment,{children:e});function As(e){return h.isValidElement(e)&&e.type===Ts}function Ls(e,t){const n={...t};for(const s in t){const i=e[s],a=t[s];/^on[A-Z]/.test(s)?i&&a?n[s]=(...c)=>{a(...c),i(...c)}:i&&(n[s]=i):s==="style"?n[s]={...i,...a}:s==="className"&&(n[s]=[i,a].filter(Boolean).join(" "))}return{...e,...n}}function ks(e){var s,i;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Is=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ce=Is.reduce((e,t)=>{const n=h.forwardRef((s,i)=>{const{asChild:a,...o}=s,c=a?we:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...o,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Ps(e){const t=e+"CollectionProvider",[n,s]=Re(t),[i,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:f,children:m}=y,b=W.useRef(null),x=W.useRef(new Map).current;return r.jsx(i,{scope:f,itemMap:x,collectionRef:b,children:m})};o.displayName=t;const c=e+"CollectionSlot",d=W.forwardRef((y,f)=>{const{scope:m,children:b}=y,x=a(c,m),C=J(f,x.collectionRef);return r.jsx(we,{ref:C,children:b})});d.displayName=c;const l=e+"CollectionItemSlot",u="data-radix-collection-item",p=W.forwardRef((y,f)=>{const{scope:m,children:b,...x}=y,C=W.useRef(null),S=J(f,C),A=a(l,m);return W.useEffect(()=>(A.itemMap.set(C,{ref:C,...x}),()=>void A.itemMap.delete(C))),r.jsx(we,{[u]:"",ref:S,children:b})});p.displayName=l;function g(y){const f=a(e+"CollectionConsumer",y);return W.useCallback(()=>{const b=f.collectionRef.current;if(!b)return[];const x=Array.from(b.querySelectorAll(`[${u}]`));return Array.from(f.itemMap.values()).sort((A,R)=>x.indexOf(A.ref.current)-x.indexOf(R.ref.current))},[f.collectionRef,f.itemMap])}return[{Provider:o,Slot:d,ItemSlot:p},g,s]}var Ue="rovingFocusGroup.onEntryFocus",Ds={bubbles:!1,cancelable:!0},_e="RovingFocusGroup",[Ze,an,Es]=Ps(_e),[Fs,on]=Re(_e,[Es]),[Ms,_s]=Fs(_e),cn=h.forwardRef((e,t)=>r.jsx(Ze.Provider,{scope:e.__scopeRovingFocusGroup,children:r.jsx(Ze.Slot,{scope:e.__scopeRovingFocusGroup,children:r.jsx(Os,{...e,ref:t})})}));cn.displayName=_e;var Os=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:l,preventScrollOnEntryFocus:u=!1,...p}=e,g=h.useRef(null),y=J(t,g),f=kt(a),[m=null,b]=It({prop:o,defaultProp:c,onChange:d}),[x,C]=h.useState(!1),S=Pn(l),A=an(n),R=h.useRef(!1),[D,w]=h.useState(0);return h.useEffect(()=>{const k=g.current;if(k)return k.addEventListener(Ue,S),()=>k.removeEventListener(Ue,S)},[S]),r.jsx(Ms,{scope:n,orientation:s,dir:f,loop:i,currentTabStopId:m,onItemFocus:h.useCallback(k=>b(k),[b]),onItemShiftTab:h.useCallback(()=>C(!0),[]),onFocusableItemAdd:h.useCallback(()=>w(k=>k+1),[]),onFocusableItemRemove:h.useCallback(()=>w(k=>k-1),[]),children:r.jsx(ce.div,{tabIndex:x||D===0?-1:0,"data-orientation":s,...p,ref:y,style:{outline:"none",...e.style},onMouseDown:G(e.onMouseDown,()=>{R.current=!0}),onFocus:G(e.onFocus,k=>{const Tn=!R.current;if(k.target===k.currentTarget&&Tn&&!x){const lt=new CustomEvent(Ue,Ds);if(k.currentTarget.dispatchEvent(lt),!lt.defaultPrevented){const Oe=A().filter(Y=>Y.focusable),An=Oe.find(Y=>Y.active),Ln=Oe.find(Y=>Y.id===m),kn=[An,Ln,...Oe].filter(Boolean).map(Y=>Y.ref.current);un(kn,u)}}R.current=!1}),onBlur:G(e.onBlur,()=>C(!1))})})}),ln="RovingFocusGroupItem",dn=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:i=!1,tabStopId:a,...o}=e,c=In(),d=a||c,l=_s(ln,n),u=l.currentTabStopId===d,p=an(n),{onFocusableItemAdd:g,onFocusableItemRemove:y}=l;return h.useEffect(()=>{if(s)return g(),()=>y()},[s,g,y]),r.jsx(Ze.ItemSlot,{scope:n,id:d,focusable:s,active:i,children:r.jsx(ce.span,{tabIndex:u?0:-1,"data-orientation":l.orientation,...o,ref:t,onMouseDown:G(e.onMouseDown,f=>{s?l.onItemFocus(d):f.preventDefault()}),onFocus:G(e.onFocus,()=>l.onItemFocus(d)),onKeyDown:G(e.onKeyDown,f=>{if(f.key==="Tab"&&f.shiftKey){l.onItemShiftTab();return}if(f.target!==f.currentTarget)return;const m=qs(f,l.orientation,l.dir);if(m!==void 0){if(f.metaKey||f.ctrlKey||f.altKey||f.shiftKey)return;f.preventDefault();let x=p().filter(C=>C.focusable).map(C=>C.ref.current);if(m==="last")x.reverse();else if(m==="prev"||m==="next"){m==="prev"&&x.reverse();const C=x.indexOf(f.currentTarget);x=l.loop?Us(x,C+1):x.slice(C+1)}setTimeout(()=>un(x))}})})})});dn.displayName=ln;var $s={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Vs(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function qs(e,t,n){const s=Vs(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return $s[s]}function un(e,t=!1){const n=document.activeElement;for(const s of e)if(s===n||(s.focus({preventScroll:t}),document.activeElement!==n))return}function Us(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var zs=cn,Ws=dn;function Gs(e,t){return h.useReducer((n,s)=>t[n][s]??n,e)}var fn=e=>{const{present:t,children:n}=e,s=Ks(t),i=typeof n=="function"?n({present:s.isPresent}):h.Children.only(n),a=J(s.ref,Bs(i));return typeof n=="function"||s.isPresent?h.cloneElement(i,{ref:a}):null};fn.displayName="Presence";function Ks(e){const[t,n]=h.useState(),s=h.useRef({}),i=h.useRef(e),a=h.useRef("none"),o=e?"mounted":"unmounted",[c,d]=Gs(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return h.useEffect(()=>{const l=be(s.current);a.current=c==="mounted"?l:"none"},[c]),dt(()=>{const l=s.current,u=i.current;if(u!==e){const g=a.current,y=be(l);e?d("MOUNT"):y==="none"||(l==null?void 0:l.display)==="none"?d("UNMOUNT"):d(u&&g!==y?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,d]),dt(()=>{if(t){let l;const u=t.ownerDocument.defaultView??window,p=y=>{const m=be(s.current).includes(y.animationName);if(y.target===t&&m&&(d("ANIMATION_END"),!i.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",l=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},g=y=>{y.target===t&&(a.current=be(s.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",p),t.addEventListener("animationend",p),()=>{u.clearTimeout(l),t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",p),t.removeEventListener("animationend",p)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:h.useCallback(l=>{l&&(s.current=getComputedStyle(l)),n(l)},[])}}function be(e){return(e==null?void 0:e.animationName)||"none"}function Bs(e){var s,i;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var ot="Radio",[Hs,mn]=Re(ot),[Ys,Zs]=Hs(ot),pn=h.forwardRef((e,t)=>{const{__scopeRadio:n,name:s,checked:i=!1,required:a,disabled:o,value:c="on",onCheck:d,form:l,...u}=e,[p,g]=h.useState(null),y=J(t,b=>g(b)),f=h.useRef(!1),m=p?l||!!p.closest("form"):!0;return r.jsxs(Ys,{scope:n,checked:i,disabled:o,children:[r.jsx(ce.button,{type:"button",role:"radio","aria-checked":i,"data-state":bn(i),"data-disabled":o?"":void 0,disabled:o,value:c,...u,ref:y,onClick:G(e.onClick,b=>{i||d==null||d(),m&&(f.current=b.isPropagationStopped(),f.current||b.stopPropagation())})}),m&&r.jsx(Xs,{control:p,bubbles:!f.current,name:s,value:c,checked:i,required:a,disabled:o,form:l,style:{transform:"translateX(-100%)"}})]})});pn.displayName=ot;var hn="RadioIndicator",xn=h.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:s,...i}=e,a=Zs(hn,n);return r.jsx(fn,{present:s||a.checked,children:r.jsx(ce.span,{"data-state":bn(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:t})})});xn.displayName=hn;var Xs=e=>{const{control:t,checked:n,bubbles:s=!0,...i}=e,a=h.useRef(null),o=Dn(n),c=En(t);return h.useEffect(()=>{const d=a.current,l=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(l,"checked").set;if(o!==n&&p){const g=new Event("click",{bubbles:s});p.call(d,n),d.dispatchEvent(g)}},[o,n,s]),r.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:a,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function bn(e){return e?"checked":"unchecked"}var Qs=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ct="RadioGroup",[Js,Bi]=Re(ct,[on,mn]),yn=on(),gn=mn(),[ei,ti]=Js(ct),Cn=h.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:s,defaultValue:i,value:a,required:o=!1,disabled:c=!1,orientation:d,dir:l,loop:u=!0,onValueChange:p,...g}=e,y=yn(n),f=kt(l),[m,b]=It({prop:a,defaultProp:i,onChange:p});return r.jsx(ei,{scope:n,name:s,required:o,disabled:c,value:m,onValueChange:b,children:r.jsx(zs,{asChild:!0,...y,orientation:d,dir:f,loop:u,children:r.jsx(ce.div,{role:"radiogroup","aria-required":o,"aria-orientation":d,"data-disabled":c?"":void 0,dir:f,...g,ref:t})})})});Cn.displayName=ct;var vn="RadioGroupItem",jn=h.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:s,...i}=e,a=ti(vn,n),o=a.disabled||s,c=yn(n),d=gn(n),l=h.useRef(null),u=J(t,l),p=a.value===i.value,g=h.useRef(!1);return h.useEffect(()=>{const y=m=>{Qs.includes(m.key)&&(g.current=!0)},f=()=>g.current=!1;return document.addEventListener("keydown",y),document.addEventListener("keyup",f),()=>{document.removeEventListener("keydown",y),document.removeEventListener("keyup",f)}},[]),r.jsx(Ws,{asChild:!0,...c,focusable:!o,active:p,children:r.jsx(pn,{disabled:o,required:a.required,checked:p,...d,...i,name:a.name,ref:u,onCheck:()=>a.onValueChange(i.value),onKeyDown:G(y=>{y.key==="Enter"&&y.preventDefault()}),onFocus:G(i.onFocus,()=>{var y;g.current&&((y=l.current)==null||y.click())})})})});jn.displayName=vn;var ni="RadioGroupIndicator",Nn=h.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...s}=e,i=gn(n);return r.jsx(xn,{...i,...s,ref:t})});Nn.displayName=ni;var wn=Cn,Sn=jn,ri=Nn;const Rn=h.forwardRef(({className:e,...t},n)=>r.jsx(wn,{className:$t("grid gap-2",e),...t,ref:n}));Rn.displayName=wn.displayName;const Xe=h.forwardRef(({className:e,...t},n)=>r.jsx(Sn,{ref:n,className:$t("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:r.jsx(ri,{className:"flex items-center justify-center",children:r.jsx($n,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Xe.displayName=Sn.displayName;const ye=()=>{const{formData:e,onHandleBack:t,resetForm:n}=K(),{mutate:s,isLoading:i}=tr(),[a,o]=h.useState("tree"),{t:c}=V(),d=gr(),{additionData:l,excludeOptions:u,closeModal:p,clientType:g}=B(),y=()=>{const{requireConsent:b,redirectUris:x,logoutUri:C,secretType:S,secretValue:A,secretDescription:R,expiration:D,...w}=e,k=g?at[g]:void 0;return{...w,...u!=null&&u.consent?{}:{requireConsent:b},...u!=null&&u.uris?{}:{redirectUris:x,logoutUri:C},...u!=null&&u.secrets?{}:{secretType:S,secretValue:A,secretDescription:R,expiration:D},...(k==null?void 0:k.enforcedValues)??{},clientProperties:[{key:Vt,value:Ge[g]}]}},f=()=>{const b=y();return ar(b,(l==null?void 0:l.grantTypes)??[])},m=async()=>{try{const b=f(),x=u!=null&&u.secrets?void 0:new zn({id:0,description:e.secretDescription,expiration:e.expiration||void 0,hashType:e.secretHashType,type:e.secretType,value:e.secretValue,created:pr()});s({clientData:b,secret:x},{onSuccess:C=>{ft({title:r.jsx(yr,{}),description:c("Client.Actions.Added")}),p(),n(),d(et.replace(":clientId",String(C.id)))}})}catch{ft({title:c("Errors.Failed"),variant:"destructive",description:c("Errors.FailedMessage")})}};return r.jsxs(qt,{className:"mb-8",children:[r.jsxs(Ut,{className:"space-y-6 mt-4",children:[r.jsxs(Vn,{variant:"default",className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx(vr,{className:"h-5 w-5 text-primary mt-1"}),r.jsxs("div",{children:[r.jsx(qn,{className:"text-primary font-semibold",children:c("Client.Label.FinalClientReview")}),r.jsx(Un,{children:c("Client.Label.FinalClientReviewMessage")})]})]}),r.jsxs(Rn,{value:a,onValueChange:b=>o(b),className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Xe,{value:"tree",id:"tree"}),r.jsx(ht,{htmlFor:"tree",children:c("Client.Label.FinalClientReviewTreeView")})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Xe,{value:"table",id:"table"}),r.jsx(ht,{htmlFor:"table",children:c("Client.Label.FinalClientReviewTableView")})]})]})]}),a==="table"?r.jsx(Rs,{}):r.jsx(Ss,{})]}),r.jsxs(hr,{className:"flex justify-between",children:[r.jsx(P,{onClick:t,variant:"outline",children:c("Actions.Back")}),r.jsx(P,{type:"button",onClick:m,disabled:i,children:i?r.jsx(Je,{}):c("Actions.Save")})]})]})},Qe=e=>M.string().url(e("Validation.UrlRequired")),si=e=>M.object({redirectUris:M.array(Qe(e)).min(1,{message:e("Client.Wizard.Validation.RedirectUrisRequired")}),logoutUri:Qe(e).or(M.literal("")).optional()}),Lt={redirectUris:[],logoutUri:""},ze=()=>{const{onHandleNext:e,setFormData:t,formData:n,onHandleBack:s}=K(),{onValidation:i}=B(),{t:a}=V(),o=Le({defaultValues:Lt,resolver:Te(si(a)),mode:"onChange"});Pe(o,n,Lt),Ie(i,o.formState.errors,o.getValues()),De(o,"uris");const c=d=>{t(l=>({...l,...d})),e()};return r.jsx(Ae,{...o,children:r.jsxs("form",{onSubmit:o.handleSubmit(c),children:[r.jsx(ke,{children:r.jsx(nt,{i18nKey:"Client.Tips.RedirectUris",components:{strong:r.jsx("strong",{}),code:r.jsx("code",{}),br:r.jsx("br",{})}})}),r.jsx(Z,{name:"redirectUris",label:a("Client.Label.RedirectUris_Label"),description:a("Client.Label.RedirectUris_Info"),type:"inputWithTable",required:!0,includeSeparator:!0,inputWithTableSettings:{validationSchema:Qe(a)}}),r.jsx(Z,{name:"logoutUri",label:a("Client.Label.PostLogoutRedirectUris_Label"),description:a("Client.Label.PostLogoutRedirectUris_Info")}),r.jsxs("div",{className:"flex justify-between mt-4",children:[r.jsx(P,{onClick:s,variant:"outline",children:a("Actions.Back")}),r.jsx(P,{type:"submit",children:a("Actions.Next")})]})]})})},Se={[O.Confidential]:{steps:[{stepType:L.Basics,component:pe},{stepType:L.Uris,component:ze},{stepType:L.Scopes,component:he},{stepType:L.Secrets,component:$e},{stepType:L.Review,component:ye}],excludeOptions:{consent:!1,identityResources:!1,uris:!1},additionalData:{grantTypes:[fe.AuthorizationCode]}},[O.Machine]:{steps:[{stepType:L.Basics,component:pe},{stepType:L.Scopes,component:he},{stepType:L.Secrets,component:$e},{stepType:L.Review,component:ye}],excludeOptions:{consent:!0,identityResources:!0,uris:!0},additionalData:{grantTypes:[fe.ClientCreadentials]}},[O.Public]:{steps:[{stepType:L.Basics,component:pe},{stepType:L.Uris,component:ze},{stepType:L.Scopes,component:he},{stepType:L.Review,component:ye}],excludeOptions:{consent:!1,identityResources:!1,uris:!1,secrets:!0},additionalData:{grantTypes:[fe.AuthorizationCode]}},[O.HighSecure]:{steps:[{stepType:L.Basics,component:pe},{stepType:L.Uris,component:ze},{stepType:L.Scopes,component:he},{stepType:L.Secrets,component:$e},{stepType:L.Review,component:ye}],excludeOptions:{consent:!1,identityResources:!1,uris:!1},additionalData:{grantTypes:[fe.AuthorizationCode]}}},ii=e=>Se[e].steps.map(n=>n.stepType),ai=({step:e,steps:t,stepHasError:n})=>r.jsx("ol",{className:"flex items-center w-full text-xs font-medium sm:text-base",children:t.map((s,i)=>{const a=s.step<e,o=s.step===e,c=s.step>e,d=i===t.length-1;return r.jsx("li",{className:ne("flex relative",{"w-full":!d},!d&&"after:content-[''] after:w-full after:h-0.5 after:inline-block after:absolute lg:after:top-5 after:top-3 after:left-4",!d&&(a?"after:bg-primary":"after:bg-muted")),children:r.jsxs("div",{className:"block whitespace-nowrap z-10",children:[r.jsx("span",{className:ne("w-6 h-6 rounded-full flex justify-center items-center mx-auto mb-3 text-sm lg:w-10 lg:h-10 border",a&&"bg-primary text-primary-foreground border-transparent",o&&!n&&"bg-primary text-primary-foreground border-2 border-primary",o&&n&&"bg-destructive text-destructive-foreground border-2 border-destructive",c&&"bg-muted text-muted-foreground border-muted-foreground/20"),children:a?r.jsx(Wn,{className:"w-4 h-4"}):o&&n?r.jsx(Gn,{className:"w-4 h-4"}):i+1}),r.jsx("span",{className:ne(a&&"text-foreground",o&&!n&&"text-foreground",o&&n&&"text-destructive",c&&"text-muted-foreground"),children:s.name})]})},s.step)})}),oi=({steps:e})=>{const{step:t}=K();return e.map(n=>n.step===t?r.jsx(W.Fragment,{children:n.component},n.step):null)},ci=()=>{const{stepErrors:e,clientType:t,toggleModal:n,isOpen:s}=B(),{isAnyDirty:i,reset:a}=Ot(),{DialogCmp:o,confirm:c}=Cr(i);if(t===void 0)return null;const l=Se[t].steps.map(({stepType:x,component:C})=>({name:L[x],step:x,component:r.jsx(C,{})})),{step:u,resetForm:p}=K(),{t:g}=V(),y="sm:max-w-[900px] max-h-[calc(100vh-2rem)]",f="max-w-full flex flex-col items-start justify-start h-full",m=u===l[l.length-1].step,b=async x=>{if(x){n(x);return}i?await c()&&(n(!1),p(),a()):(n(x),p(),a())};return r.jsxs(r.Fragment,{children:[r.jsx(Pt,{open:s,onOpenChange:b,children:r.jsxs(Dt,{className:ne("overflow-auto transition-all duration-500 ease-in-out",m?f:y),children:[r.jsx(Et,{children:r.jsx(Ft,{children:g(m?"Client.Wizard.ReviewSubmit":"Client.Wizard.NewClient")})}),r.jsx(Mt,{children:g(m?"Client.Wizard.ReviewClientDetails":"Client.Wizard.CreateNewClientDescription")}),!m&&r.jsx("div",{className:"m-3",children:r.jsx(ai,{steps:l,step:u,stepHasError:e})}),r.jsx("div",{className:ne(m?"w-full":"m-3"),children:r.jsx(oi,{steps:l})})]})}),o]})},li=({closeModalClientType:e,isOpenModalClientType:t})=>{const[n,s]=h.useState(),i=n?ii(n):[];return r.jsx(Ir,{clientType:n,excludeOptions:n?Se[n].excludeOptions:void 0,additionData:n?Se[n].additionalData:void 0,children:r.jsxs(kr,{steps:i,initialFormData:void 0,children:[r.jsx(Pr,{isOpen:t,onClose:e,onClientTypeSelected:s}),n&&r.jsx(ci,{})]})})},di=({client:e})=>{const{t}=V(),n=ir(),s=tt();return r.jsxs(r.Fragment,{children:[r.jsxs(Kn,{children:[r.jsx(Bn,{asChild:!0,children:r.jsxs(P,{variant:"ghost",className:"h-8 w-8 p-0",children:[r.jsx("span",{className:"sr-only",children:t("Common.OpenMenu")}),r.jsx(Nr,{className:"h-4 w-4"})]})}),r.jsxs(Hn,{align:"end",children:[r.jsx(mt,{onClick:()=>n(et.replace(":clientId",e.id.toString())),children:t("Actions.Edit")}),r.jsx(Yn,{}),r.jsx(mt,{variant:"destructive",onClick:()=>s.openModal(),children:t("Actions.Delete")})]})]}),r.jsx(or,{clientId:e.id.toString(),clientName:e.clientName,modal:s})]})},ui=({data:e,pagination:t,setPagination:n})=>{const{t:s}=V(),i=[{accessorKey:"clientName",header:s("Clients.ClientName"),cell:({row:a})=>{const o=a.original;return r.jsx(We,{to:et.replace(":clientId",o.id.toString()),className:"underline",children:o.clientName})}},{accessorKey:"clientId",header:s("Clients.ClientId"),cell:({row:a})=>{const o=a.original;return r.jsx("code",{className:"bg-muted px-2 py-1 rounded",children:o.clientId})}},{accessorKey:"clientType",header:s("Clients.ClientType"),cell:({row:a})=>{var p,g;const c=(g=(p=a.original.clientProperties)==null?void 0:p.find(y=>y.key===Vt))==null?void 0:g.value,u=`Client.ClientTypes.${Object.keys(Ge).find(y=>Ge[y]===c)??"Generic"}`;return r.jsx(Zn,{variant:"outline",children:s(u)})}},{id:"actions",cell:({row:a})=>r.jsx(di,{client:a.original})}];return r.jsx(jr,{columns:i,data:e.items,totalCount:e.totalCount,pagination:t,setPagination:n})},Hi=()=>{const{pagination:e,setPagination:t}=sr(),{isOpen:n,closeModal:s,openModal:i}=tt(),{t:a}=V(),{inputValue:o,handleInputChange:c,handleSearch:d,handleInputKeyDown:l,searchTerm:u}=Fn({onSearchComplete:()=>{t({...e,pageIndex:0})}}),p=Xn([Jn.clients,e,u],()=>nr(u,e.pageIndex,e.pageSize),{keepPreviousData:!0}),g=r.jsxs("div",{className:"flex flex-col space-y-3 md:flex-row md:items-center md:space-x-3 md:space-y-0",children:[r.jsxs(P,{onClick:i,children:[r.jsx(Sr,{className:"mr-2 h-4 w-4"}),a("Clients.AddNewClient")]}),r.jsxs("div",{className:"relative w-full md:w-72",children:[r.jsx(wr,{type:"text",placeholder:a("Clients.SearchPlaceholder"),className:"pr-10",value:o,onChange:c,onKeyDown:l}),r.jsx(Qn,{className:"pointer-events-none absolute right-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"})]}),r.jsx(P,{variant:"secondary",onClick:d,children:a("Actions.Search")})]});return r.jsx(rr,{title:a("Clients.PageTitle"),icon:_t,accentKind:"management",topSection:g,children:p.isLoading?r.jsx(Je,{fullscreen:!0}):p.data?r.jsxs(r.Fragment,{children:[r.jsx(ui,{data:p.data,pagination:e,setPagination:t}),r.jsx(li,{closeModalClientType:s,isOpenModalClientType:n})]}):null})};export{Hi as default};
