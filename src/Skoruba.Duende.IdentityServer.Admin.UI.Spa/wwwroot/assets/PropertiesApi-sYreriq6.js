import{j as e}from"./ui-vendor-B17-n605.js";import{a as T}from"./react-vendor-DPOhIiRq.js";import{a6 as Q,u as S,V as m,B as u,L as N}from"./index-Wlv9NPcq.js";import{u as x}from"./useMutation-D1x_VNBj.js";import{u as O}from"./usePaginationTable-07dZaguv.js";import{D as F}from"./DataTable-B0Ct-saY.js";import{u as H}from"./modalHooks-CXBaxWb4.js";import{P as L}from"./PropertyModal-BlKWw49x.js";import{A as w,a as z,b as B,c as E,d as V,e as K,f as R,g as G}from"./alert-dialog-lMowj9XJ.js";import{u as I}from"./i18n-vendor-TY_g4tCM.js";import{T as J}from"./trash-BlSZp5ex.js";const oe=({resourceId:n,queryKey:r,getProperties:A,addProperty:h,deleteProperty:g,pageTitle:j})=>{var d,p;const{t}=I(),{pagination:o,setPagination:f}=O(0,5),{isOpen:y,openModal:D,closeModal:l}=H(),c=Q(),i=S([...r,o],()=>A(n,o.pageIndex,o.pageSize),{keepPreviousData:!0}),C=x(s=>h(n,s),{onSuccess:()=>{m({title:t("Actions.Hooray"),description:t("Property.Actions.Added")}),c.invalidateQueries(r),l()}}),P=x(s=>g(s),{onSuccess:()=>{m({title:t("Actions.Hooray"),description:t("Property.Actions.Deleted")}),c.invalidateQueries(r)}}),b=s=>{C.mutate(s)},v=[{accessorKey:"key",header:t("Property.Key")},{accessorKey:"value",header:t("Property.Value")},{id:"actions",cell:({row:s})=>{const M=s.original,[k,a]=T.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(u,{onClick:()=>a(!0),type:"button",variant:"ghost",className:"text-red-500",size:"sm",children:e.jsx(J,{className:"h-4 w-4"})}),e.jsx(w,{open:k,onOpenChange:a,children:e.jsxs(z,{children:[e.jsxs(B,{children:[e.jsx(E,{children:t("Actions.ConfirmDeletion")}),e.jsx(V,{children:t("Property.Actions.DeletePropertyConfirm")})]}),e.jsxs(K,{children:[e.jsx(R,{onClick:()=>a(!1),children:t("Actions.Cancel")}),e.jsx(G,{variant:"destructive",onClick:()=>{P.mutate(M.id),a(!1)},children:t("Actions.Delete")})]})]})})]})}}];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:j}),e.jsx(u,{type:"button",onClick:D,children:t("Property.Actions.Add")})]}),i.isLoading?e.jsx(N,{}):e.jsx(F,{columns:v,data:((d=i.data)==null?void 0:d.items)??[],totalCount:((p=i.data)==null?void 0:p.totalCount)??-1,pagination:o,setPagination:f}),e.jsx(L,{isOpen:y,onClose:l,onSubmit:b})]})};export{oe as P};
