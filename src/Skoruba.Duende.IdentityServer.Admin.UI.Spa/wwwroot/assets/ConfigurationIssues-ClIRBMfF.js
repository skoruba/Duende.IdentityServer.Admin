import{j as e}from"./ui-vendor-B17-n605.js";import{c as F,aN as D,aO as k,a2 as T,an as S,L as U,v as W,B as x,Y as M,a3 as V,S as Y}from"./index-CdBI-htr.js";import{D as B}from"./DataTable--gV2R1Iv.js";import{P as K,S as A,f as R,g as E,h as N,i as a}from"./table-BP8iBnNG.js";import{T as z}from"./FormRow-xJkbr_zM.js";import{I as G}from"./IssueTypeBadge-bLvs_Uq6.js";import{I as H}from"./input-_DkWkCAk.js";import{a as g,L as v}from"./react-vendor-DPOhIiRq.js";import{u as X}from"./i18n-vendor-TY_g4tCM.js";import"./utils-BBmT1Bs5.js";import"./table-vendor-Cc_vDqy9.js";import"./Card-C7iMkR7A.js";import"./form-vendor-DdiMXTjA.js";import"./calendar-CfMd0lJI.js";import"./circle-plus-B6pxUeth.js";import"./DateTimeHelper-8fem5lKY.js";import"./circle-x-DNTeeIgL.js";import"./info-hFWN7vA2.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=F("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=F("Hammer",[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]]),O={ALL_RESOURCE_TYPES:"all",ALL_ISSUE_TYPES:"all"},t={ALL:O.ALL_RESOURCE_TYPES,CLIENT:"Client",API_SCOPE:"ApiScope",API_RESOURCE:"ApiResource",IDENTITY_RESOURCE:"IdentityResource"},n={ALL:O.ALL_ISSUE_TYPES,ERROR:"Error",WARNING:"Warning",RECOMMENDATION:"Recommendation"},he=()=>{const{t:s}=X(),[o,I]=g.useState(""),[c,y]=g.useState(t.ALL),[u,C]=g.useState(n.ALL),[h,P]=g.useState(!1),{data:d,isLoading:w}=D(),p=g.useMemo(()=>!d||!Array.isArray(d)?[]:d.filter(r=>{var l,L;const i=o===""||((l=r.resourceName)==null?void 0:l.toLowerCase().includes(o.toLowerCase()))||((L=r.message)==null?void 0:L.toLowerCase().includes(o.toLowerCase())),m=c===t.ALL||String(r.resourceType)===c,f=u===n.ALL||String(r.issueType)===u;return i&&m&&f}),[d,o,c,u]),_=()=>{I(""),y(t.ALL),C(n.ALL)},j=o||c!==t.ALL||u!==n.ALL,b=[{accessorKey:"resourceName",header:s("ConfigurationIssues.ResourceName"),cell:({row:r})=>{const i=r.original;return e.jsx(v,{to:k(i.resourceId.toString(),i.resourceType),className:"underline",children:i.resourceName})}},{accessorKey:"resourceType",header:s("ConfigurationIssues.ResourceType"),cell:({row:r})=>{const i=String(r.original.resourceType),m={Client:"outline",ApiScope:"outline",ApiResource:"outline",IdentityResource:"outline"};return e.jsx(T,{variant:m[i]||"default",children:i})}},{accessorKey:"issueType",header:s("ConfigurationIssues.IssueType"),cell:({row:r})=>{const i=r.original,m=String(i.issueType)==="Error"||i.issueType===S.Error,f=String(i.issueType)==="Warning"||i.issueType===S.Warning;let l;return m?l=s("ConfigurationIssues.IssueTypeError"):f?l=s("ConfigurationIssues.IssueTypeWarning"):l=s("ConfigurationIssues.IssueTypeRecommendation"),e.jsx("div",{className:"whitespace-nowrap",children:e.jsx(G,{type:i.issueType,label:l})})}},{accessorKey:"message",header:s("ConfigurationIssues.Message"),cell:({row:r})=>r.original.message},{header:s("ConfigurationIssues.Fix"),cell:({row:r})=>{const i=r.original.fixDescription;return i?e.jsx(z,{side:"left",description:i,children:e.jsx(J,{})}):null}}];return w?e.jsx(U,{fullscreen:!0}):e.jsxs(K,{title:s("ConfigurationIssues.PageTitle"),icon:W,accentKind:"monitoring",topSection:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(x,{variant:h?"default":"outline",size:"sm",onClick:()=>P(!h),children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),s("ConfigurationIssues.Filters"),j&&e.jsx(T,{variant:"secondary",className:"ml-2 px-1 py-0 text-xs",children:[o&&"search",c!==t.ALL&&"type",u!==n.ALL&&"severity"].filter(Boolean).length})]}),e.jsx(v,{to:"/configuration-rules",children:e.jsxs(x,{variant:"outline",size:"sm",children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),s("ConfigurationIssues.ManageRules")]})})]}),children:[h&&e.jsxs("div",{className:"mb-6 space-y-4 rounded-lg border bg-card p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium",children:s("ConfigurationIssues.FilterOptions")}),j&&e.jsxs(x,{variant:"ghost",size:"sm",onClick:_,children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),s("ConfigurationIssues.ClearFilters")]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:s("ConfigurationIssues.SearchPlaceholder")}),e.jsxs("div",{className:"relative",children:[e.jsx(V,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(H,{placeholder:s("ConfigurationIssues.SearchPlaceholder"),value:o,onChange:r=>I(r.target.value),className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:s("ConfigurationIssues.ResourceType")}),e.jsxs(A,{value:c,onValueChange:r=>y(r),children:[e.jsx(R,{children:e.jsx(E,{})}),e.jsxs(N,{children:[e.jsx(a,{value:t.ALL,children:s("ConfigurationIssues.AllTypes")}),e.jsx(a,{value:t.CLIENT,children:s("ConfigurationIssues.Client")}),e.jsx(a,{value:t.API_SCOPE,children:s("ConfigurationIssues.ApiScope")}),e.jsx(a,{value:t.API_RESOURCE,children:s("ConfigurationIssues.ApiResource")}),e.jsx(a,{value:t.IDENTITY_RESOURCE,children:s("ConfigurationIssues.IdentityResource")})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:s("ConfigurationIssues.Severity")}),e.jsxs(A,{value:u,onValueChange:r=>C(r),children:[e.jsx(R,{children:e.jsx(E,{})}),e.jsxs(N,{children:[e.jsx(a,{value:n.ALL,children:s("ConfigurationIssues.AllSeverities")}),e.jsx(a,{value:n.ERROR,children:s("ConfigurationIssues.IssueTypeError")}),e.jsx(a,{value:n.WARNING,children:s("ConfigurationIssues.IssueTypeWarning")}),e.jsx(a,{value:n.RECOMMENDATION,children:s("ConfigurationIssues.IssueTypeRecommendation")})]})]})]})]}),e.jsx("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:e.jsx("span",{children:s("ConfigurationIssues.ShowingResults",{count:p.length,total:Array.isArray(d)?d.length:0})})})]}),e.jsx(B,{columns:b,data:p,totalCount:p.length,pagination:{pageIndex:0,pageSize:p.length,hidePagination:!0},setPagination:()=>{}})]})};export{he as default};
