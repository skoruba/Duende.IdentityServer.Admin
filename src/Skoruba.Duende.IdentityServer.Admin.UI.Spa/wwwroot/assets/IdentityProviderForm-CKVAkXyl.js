import{j as e}from"./ui-vendor-B17-n605.js";import{z as i,u as C}from"./form-vendor-DdiMXTjA.js";import{a as d,t as D,F}from"./FormRow-BJ2vApYT.js";import{S as f,B as y,p as v,V as _,aG as w}from"./index-ho5AqpLY.js";import{b as B,c as A,I as E}from"./IdentityProviderDeleteDialog-6Y-uJqmg.js";import{H as V}from"./Hoorey-CUT3sCzh.js";import{u as q}from"./modalHooks-CXBaxWb4.js";import{C as h}from"./CardWrapper-CUi5pp2C.js";import{u as m,t as s}from"./i18n-vendor-TY_g4tCM.js";import{I as j}from"./info-DpmDjKA8.js";import{P as R}from"./PropertiesForm-arWQ4AU3.js";import{T as I,a as U,b as P,c as x}from"./tabs-CtwGsjwO.js";import{a as M}from"./react-vendor-DPOhIiRq.js";import{b as k,a as O}from"./useConfirmUnsavedChanges-CdlA0a9-.js";import{T as H}from"./trash-2-CicqKZec.js";const W=()=>{const{t}=m();return e.jsxs(h,{title:t("IdentityProvider.Tabs.Basics"),description:t("IdentityProvider.Tabs.BasicsDescription"),icon:j,children:[e.jsx(d,{name:"scheme",label:t("IdentityProvider.Section.Label.Scheme_Label"),description:t("IdentityProvider.Section.Label.Scheme_Info"),type:"input",required:!0}),e.jsx(d,{name:"type",label:t("IdentityProvider.Section.Label.ProtocolType_Label"),description:t("IdentityProvider.Section.Label.ProtocolType_Info"),type:"input",required:!0}),e.jsx(d,{name:"displayName",label:t("IdentityProvider.Section.Label.DisplayName_Label"),description:t("IdentityProvider.Section.Label.DisplayName_Info"),type:"input"}),e.jsx(d,{name:"enabled",label:t("IdentityProvider.Section.Label.Enabled_Label"),description:t("IdentityProvider.Section.Label.Enabled_Info"),type:"switch"})]})},z=()=>e.jsx(W,{}),G=()=>{const{t}=m();return e.jsx(h,{title:t("IdentityProvider.Tabs.Properties"),description:t("IdentityProvider.Tabs.PropertiesDescription"),icon:f,children:e.jsx(R,{})})},K=i.object({id:i.number().optional().default(0),scheme:i.string().min(1,s("Validation.FieldRequired",{field:s("IdentityProvider.Section.Label.Scheme_Label")})),displayName:i.string().optional().nullable(),enabled:i.boolean(),type:i.string().optional(),properties:i.array(i.object({id:i.number().optional().default(0),key:i.string().min(1,s("Validation.FieldRequired",{field:s("Property.Key")})),value:i.string().min(1,s("Validation.FieldRequired",{field:s("Property.Value")}))})).default([])}),me={id:0,scheme:"",displayName:void 0,enabled:!0,type:"oidc",properties:[]};var $=(t=>(t.Create="create",t.Edit="edit",t))($||{});const pe=({mode:t,defaultValues:a})=>{const{t:r}=m(),c=q(),[p,b]=M.useState("basics"),o=C({resolver:D(K),defaultValues:a}),l=k(o),{DialogCmp:S}=O(o.formState.isDirty),g=B(),T=A(),N=async L=>{const n=await(t==="create"?g:T).mutateAsync(L);_({title:e.jsx(V,{}),description:r(t==="create"?"IdentityProvider.Actions.Created":"IdentityProvider.Actions.Updated")}),t==="create"&&(n!=null&&n.id)?l(w.replace(":providerId",n.id.toString())):l(v)},u=t==="edit"&&!!a.id&&!!a.scheme;return e.jsxs(e.Fragment,{children:[e.jsxs(F,{...o,children:[e.jsxs("form",{onSubmit:o.handleSubmit(N),children:[e.jsxs("div",{className:"flex items-center justify-between mt-4 mb-4",children:[e.jsx(I,{defaultValue:"basics",value:p,onValueChange:b,className:"flex-1",children:e.jsxs(U,{children:[e.jsxs(P,{value:"basics",className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-4 w-4"}),r("IdentityProvider.Tabs.Basics")]}),e.jsxs(P,{value:"properties",className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-4 w-4"}),r("IdentityProvider.Tabs.Properties")]})]})}),u&&e.jsxs(y,{type:"button",variant:"destructive",onClick:c.openModal,className:"ml-4",children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),r("IdentityProvider.Actions.Delete")]})]}),e.jsxs(I,{defaultValue:"basics",value:p,onValueChange:b,className:"mt-0",children:[e.jsx(x,{value:"basics",children:e.jsx(z,{})}),e.jsx(x,{value:"properties",children:e.jsx(G,{})})]}),e.jsx("div",{className:"flex gap-4 justify-start mt-4",children:e.jsx(y,{type:"submit",children:r(t==="create"?"Actions.Create":"Actions.Save")})})]}),u&&e.jsx(E,{providerId:a.id.toString(),identityProviderName:a.scheme,isOpen:c.isOpen,setIsOpen:c.setValue,onSuccess:()=>l(v)})]}),S]})};export{pe as I,$ as a,me as d};
